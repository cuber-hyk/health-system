{"remainingRequest":"F:\\专利管理系统\\client_home\\node_modules\\babel-loader\\lib\\index.js!F:\\专利管理系统\\client_home\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\专利管理系统\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\专利管理系统\\client_home\\src\\components\\diy\\form_editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\专利管理系统\\client_home\\src\\components\\diy\\form_editor.vue","mtime":1669188328000},{"path":"F:\\专利管理系统\\client_home\\babel.config.js","mtime":1669188328000},{"path":"F:\\专利管理系统\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\专利管理系统\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\专利管理系统\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\专利管理系统\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBtaXhpbiBmcm9tICJAL21peGlucy9jb21wb25lbnQuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbbWl4aW5dLAogIHByb3BzOiB7CiAgICBmb3JtOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgY29udGVudDogIiIKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgcG9zdF91cmw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIHB1Ymxpc2hfZmxhZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgbWV0aG9kczogewogICAgLyoqDQogICAgICog5Y+R6KGo6K+E6K66DQogICAgICovCiAgICBwdWJsaXNoKCkgewogICAgICBpZiAoIXRoaXMudXNlci51c2VyX2lkKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hY2NvdW50L2xvZ2luIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBmb3JtID0gdGhpcy5mb3JtOwogICAgICBmb3JtID0gT2JqZWN0LmFzc2lnbihmb3JtLCB7CiAgICAgICAgdXNlcl9pZDogdGhpcy51c2VyLnVzZXJfaWQsCiAgICAgICAgYXZhdGFyOiB0aGlzLnVzZXIuYXZhdGFyLAogICAgICAgIG5pY2tuYW1lOiB0aGlzLnVzZXIubmlja25hbWUKICAgICAgfSk7CiAgICAgIGlmICghZm9ybS5jb250ZW50KSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIui+k+WFpeWGheWuueS4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgcG9zdF91cmwgPSB0aGlzLnBvc3RfdXJsOwogICAgICBpZiAoIXBvc3RfdXJsKSB7CiAgICAgICAgcG9zdF91cmwgPSAifi9hcGkvY29tbWVudC9hZGQ/IjsKICAgICAgfQogICAgICB0aGlzLiRwb3N0KHBvc3RfdXJsLCBmb3JtLCByZXMgPT4gewogICAgICAgIGlmIChyZXMucmVzdWx0KSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCJ1cGRhdGVfY29tbWVudCIpOwogICAgICAgICAgdGhpcy5mb3JtLmNvbnRlbnQgPSAiIjsKICAgICAgICB9IGVsc2UgaWYgKHJlcy5lcnJvcikgewogICAgICAgICAgdGhpcy4kdG9hc3QocmVzLmVycm9yLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7fQp9Ow=="},{"version":3,"mappings":";AAcA;AACA;EACAA;EACAC;IACAC;MACAC;MACAC;QACA;UACAC;QACA;MACA;IACA;IACAC;MACAH;MACAC;QACA;MACA;IACA;IACAG;MACAJ;MACAC;QACA;MACA;IACA;EACA;EACAI;IACA;EACA;EACAC;IACA;AACA;AACA;IACAC;MACA;QACA;QACA;MACA;MACA;MACAR;QACAS;QACAC;QACAC;MACA;MACA;QACA;QACA;MACA;MACA;MACA;QACAP;MACA;MACA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAQ;AACA","names":["mixins","props","form","type","default","content","post_url","publish_flag","data","methods","publish","user_id","avatar","nickname","components"],"sourceRoot":"src/components/diy","sources":["form_editor.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"publish_flag\" class=\"form_editor\">\r\n    <div class=\"editor\">\r\n      <!-- 富文本编辑 -->\r\n      <quill-editor v-model.trim=\"form.content\" class=\"form_editor_block\">\r\n      </quill-editor>\r\n    </div>\r\n    <div class=\"btn_publish\">\r\n      <b-button variant=\"outline-primary\" block @click=\"publish()\">发表</b-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mixin from \"@/mixins/component.js\";\r\nexport default {\r\n  mixins: [mixin],\r\n  props: {\r\n    form: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          content: \"\",\r\n        };\r\n      },\r\n    },\r\n    post_url: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    publish_flag:{\r\n      type: Boolean,\r\n      default() {\r\n        return true;\r\n      },\r\n    }\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  methods: {\r\n    /**\r\n     * 发表评论\r\n     */\r\n    publish() {\r\n      if (!this.user.user_id) {\r\n        this.$router.push(\"/account/login\");\r\n        return\r\n      }\r\n      var form = this.form;\r\n      form = Object.assign(form, {\r\n        user_id: this.user.user_id,\r\n        avatar: this.user.avatar,\r\n        nickname: this.user.nickname,\r\n      });\r\n      if(!form.content){\r\n        this.$toast(\"输入内容不能为空\")\r\n        return\r\n      }\r\n      var post_url = this.post_url\r\n      if(!post_url){\r\n        post_url = \"~/api/comment/add?\"\r\n      }\r\n      this.$post(post_url, form, (res) => {\r\n        if (res.result) {\r\n          this.$emit(\"update_comment\");\r\n          this.form.content = \"\";\r\n        } else if (res.error) {\r\n          this.$toast(res.error.message);\r\n        }\r\n      });\r\n    },\r\n  },\r\n  components: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn_publish {\r\n  text-align: right;\r\n  margin-top: 10px;\r\n}\r\n.btn_publish button {\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n}\r\n.btn_publish button:hover {\r\n  background: var(--color_success_b);\r\n  color: white;\r\n}\r\n</style>\r\n"]}]}