{"remainingRequest":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\babel-loader\\lib\\index.js!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\views\\order\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\views\\order\\list.vue","mtime":1657768166000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\babel.config.js","mtime":1657768166000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBsaXN0X29yZGVyIGZyb20gIkAvY29tcG9uZW50cy9kaXkvbGlzdF9vcmRlci52dWUiOwppbXBvcnQgbWl4aW4gZnJvbSAiQC9taXhpbnMvcGFnZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFttaXhpbl0sCiAgY29tcG9uZW50czogewogICAgbGlzdF9vcmRlcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOeZu+W9leadg+mZkAogICAgICBvYXV0aDogewogICAgICAgIHNpZ25JbjogdHJ1ZSwKICAgICAgICB1c2VyX2dyb3VwOiBbXQogICAgICB9LAogICAgICB1cmxfZ2V0X2xpc3Q6ICJ+L2FwaS9vcmRlci9nZXRfbGlzdCIsCiAgICAgIGxpc3RfZGlmZjogW10sCiAgICAgIHF1ZXJ5OiB7CiAgICAgICAgdXNlcl9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyX2lkCiAgICAgIH0sCiAgICAgIGxpc3Rfb3JkZXJfdHlwZTogW10sCiAgICAgIHNvcnRfbGlzdDogW3sKICAgICAgICBuYW1lOiAi5pu05paw5pe26Ze05LuO6auY5Yiw5L2OIiwKICAgICAgICB2YWx1ZTogImBjcmVhdGVfdGltZWAgZGVzYyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICLmm7TmlrDml7bpl7Tku47kvY7liLDpq5giLAogICAgICAgIHZhbHVlOiAiYGNyZWF0ZV90aW1lYCBhc2MiCiAgICAgIH1dLAogICAgICBzdGF0ZV9saXN0OiBbIuWFqOmDqCIsICLlvoXku5jmrL4iLCAi5bey5LuY5qy+Il0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAq5LiL5ouJ5o6S5bqP6YCJ5oupCiAgICAgKi8KICAgIHNvcnRfb3JkZXIobykgewogICAgICB0aGlzLnF1ZXJ5Lm9yZGVyYnkgPSBvLnZhbHVlOwogICAgICB0aGlzLnNlYXJjaCgpOwogICAgfSwKICAgIC8qKgogICAgICrorqLljZXnirbmgIHnrZvpgIkKICAgICAqLwogICAgc3RhdGVfZmlsdGVyKG8pIHsKICAgICAgaWYgKG8gPT0gIuWFqOmDqCIpIHsKICAgICAgICB0aGlzLnF1ZXJ5LnN0YXRlID0gIiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5xdWVyeS5zdGF0ZSA9IG87CiAgICAgIH0KICAgICAgdGhpcy5nZXRfbGlzdCgpOwogICAgfSwKICAgIC8qKgogICAgICog5LuO5L2O5Yiw6auY5o6S5bqPCiAgICAgKi8KICAgIGNvbXBhcmVfYXNjKHByb3BlcnR5KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHZhciB2YWx1ZTEgPSBhW3Byb3BlcnR5XTsKICAgICAgICB2YXIgdmFsdWUyID0gYltwcm9wZXJ0eV07CiAgICAgICAgcmV0dXJuIHZhbHVlMSAtIHZhbHVlMjsKICAgICAgfTsKICAgIH0sCiAgICAvKioKICAgICAqIOS7jumrmOWIsOS9juaOkuW6jwogICAgICovCiAgICBjb21wYXJlX2Rlc2MocHJvcGVydHkpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgdmFyIHZhbHVlMSA9IGFbcHJvcGVydHldOwogICAgICAgIHZhciB2YWx1ZTIgPSBiW3Byb3BlcnR5XTsKICAgICAgICByZXR1cm4gdmFsdWUyIC0gdmFsdWUxOwogICAgICB9OwogICAgfSwKICAgIC8qKgogICAgICog6K6i5Y2V5LuO5L2O5Yiw6auY5o6S5bqPCiAgICAgKi8KICAgIHNvcnRfb3JkZXJfYXNjKCkgewogICAgICB0aGlzLmxpc3RfZGlmZi5zb3J0KHRoaXMuY29tcGFyZV9hc2MoInN1bV9wcmljZSIpKTsKICAgIH0sCiAgICAvKioKICAgICAqIOiuouWNleS7jumrmOWIsOS9juaOkuW6jwogICAgICovCiAgICBzb3J0X29yZGVyX2Rlc2MoKSB7CiAgICAgIHRoaXMubGlzdF9kaWZmLnNvcnQodGhpcy5jb21wYXJlX2Rlc2MoInN1bV9wcmljZSIpKTsKICAgIH0sCiAgICAvKioKICAgICAq6I635Y+W6K6i5Y2V5YmNCiAgICAgQHBhcmFtIHsgT2JqZWN0IH0gcGFyYW0g55So5oi3dXNlcl9pZAogICAgICovCiAgICBnZXRfbGlzdF9iZWZvcmUocGFyYW0pIHsKICAgICAgcGFyYW0udXNlcl9pZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9pZDsKICAgICAgcmV0dXJuIHBhcmFtOwogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgY29uc3QgZWxlbWVudCA9IGFycmF5W2luZGV4XTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICog6I636K6i5Y2V5ZCOCiAgICAgKiBAcGFyYW0ge09iamVjdH0ganNvbiDlk43lupTlr7nosaEKICAgICAqIEByZXR1cm4geyBPYmplY3QgfSDorqLljZXlr7nosaEKICAgICAqLwogICAgZ2V0X2xpc3RfYWZ0ZXIoanNvbikgewogICAgICAvLyDmoLnmja7orqLljZXlj7fljLrliIbliJfooagKICAgICAgdmFyIGxpc3RfZGlmZiA9IFtdOwogICAgICB2YXIgb3JkZXJfbnVtID0gIiI7CiAgICAgIHZhciBpbmRleCA9IC0xOwogICAgICBqc29uLnJlc3VsdC5saXN0Lm1hcChvID0+IHsKICAgICAgICBpZiAoby5vcmRlcl9udW1iZXIgPT09IG9yZGVyX251bSkgewogICAgICAgICAgbGlzdF9kaWZmW2luZGV4XVsibGlzdCJdLnB1c2gobyk7CiAgICAgICAgICBsaXN0X2RpZmZbaW5kZXhdWyJzdW1fcHJpY2UiXSArPSBvLnByaWNlX2NvdW50OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbmRleCArPSAxOwogICAgICAgICAgb3JkZXJfbnVtID0gby5vcmRlcl9udW1iZXI7CiAgICAgICAgICBsaXN0X2RpZmZbaW5kZXhdID0ge307CiAgICAgICAgICB2YXIgb2JqX2RpZmYgPSBsaXN0X2RpZmZbaW5kZXhdOwogICAgICAgICAgb2JqX2RpZmZbImNyZWF0ZV90aW1lIl0gPSBvLmNyZWF0ZV90aW1lOwogICAgICAgICAgb2JqX2RpZmZbIm9yZGVyX251bWJlciJdID0gb3JkZXJfbnVtOwogICAgICAgICAgb2JqX2RpZmZbImxpc3QiXSA9IFtdOwogICAgICAgICAgb2JqX2RpZmZbImxpc3QiXS5wdXNoKG8pOwogICAgICAgICAgb2JqX2RpZmZbInN1bV9wcmljZSJdID0gby5wcmljZV9jb3VudDsKICAgICAgICAgIG9ial9kaWZmWyJzdGF0ZSJdID0gby5zdGF0ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmxpc3RfZGlmZiA9IGxpc3RfZGlmZjsKICAgICAgcmV0dXJuIGpzb247CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";AA0DA;AACA;AAEA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACA;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;MACAC,YACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC,aACA,MACA,OACA;IAEA;EACA;EACAC;IACA;AACA;AACA;IACAC;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;QACA;MACA;QACA;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;QACA;QACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;QACA;QACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;IACA;IACA;AACA;AACA;AACA;IACAC;MACAC;MACA;MACA;QACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;MACAC;QACA;UACAlB;UACAA;QACA;UACAmB;UACAC;UACApB;UACA;UACAqB;UACAA;UACAA;UACAA;UACAA;UACAA;QACA;MACA;MACA;MACA;IACA;EACA;AACA","names":["mixins","components","list_order","data","oauth","signIn","user_group","url_get_list","list_diff","query","user_id","list_order_type","sort_list","name","value","state_list","methods","sort_order","state_filter","compare_asc","compare_desc","sort_order_asc","sort_order_desc","get_list_before","param","get_list_after","json","index","order_num","obj_diff"],"sourceRoot":"src/views/order","sources":["list.vue"],"sourcesContent":["<template>\n  <div class=\"page_order\" id=\"order_list\">\n    <div class=\"warp\" v-if=\"$check_action('/order/list', 'get')\">\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col-10\">\n            <div class=\"card_goods_list\">\n              <h4>我的订单</h4>\n              <div class=\"filter_block\">\n                <!-- 排序 -->\n                <div\n                  class=\"bar_sort\"\n                  :class=\"{ active: query.orderby == '`price` desc' }\"\n                >\n                  <b-dropdown text=\"排序\" variant=\"outline-dark\" left>\n                    <b-dropdown-item @click=\"sort_order_desc()\">\n                      价格从高到低\n                    </b-dropdown-item>\n                    <b-dropdown-item @click=\"sort_order_asc()\">\n                      价格从低到高\n                    </b-dropdown-item>\n                    <b-dropdown-item\n                      v-for=\"(o, i) in sort_list\"\n                      :key=\"i\"\n                      @click=\"sort_order(o)\"\n                    >\n                      {{ o.name }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <!-- /排序 -->\n                <!-- 订单状态筛选 -->\n                <div\n                  class=\"bar_sort\"\n                  :class=\"{ active: query.orderby == '`price` desc' }\"\n                >\n                  <b-dropdown text=\"订单状态\" variant=\"outline-dark\" left>\n                    <b-dropdown-item\n                      v-for=\"(o, i) in state_list\"\n                      :key=\"i\"\n                      @click=\"state_filter(o)\"\n                    >\n                      {{ o }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <!-- /订单状态筛选 -->\n              </div>\n              <list_order :list=\"list_diff\"></list_order>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport list_order from \"@/components/diy/list_order.vue\";\nimport mixin from \"@/mixins/page.js\";\n\nexport default {\n  mixins: [mixin],\n  components: {\n    list_order,\n  },\n  data() {\n    return {\n      // 登录权限\n      oauth: {\n        signIn: true,\n        user_group: [],\n      },\n      url_get_list: \"~/api/order/get_list\",\n      list_diff: [],\n      query: {\n        user_id: this.$store.state.user.user_id,\n      },\n      list_order_type: [],\n      sort_list: [\n        {\n          name: \"更新时间从高到低\",\n          value: \"`create_time` desc\",\n        },\n        {\n          name: \"更新时间从低到高\",\n          value: \"`create_time` asc\",\n        },\n      ],\n      state_list: [\n        \"全部\",\n        \"待付款\",\n        \"已付款\",\n      ],\n    };\n  },\n  methods: {\n    /**\n     *下拉排序选择\n     */\n    sort_order(o) {\n      this.query.orderby = o.value;\n      this.search();\n    },\n    /**\n     *订单状态筛选\n     */\n    state_filter(o) {\n      if (o == \"全部\") {\n        this.query.state = \"\";\n      } else {\n        this.query.state = o;\n      }\n      this.get_list();\n    },\n    /**\n     * 从低到高排序\n     */\n    compare_asc(property) {\n      return function (a, b) {\n        var value1 = a[property];\n        var value2 = b[property];\n        return value1 - value2;\n      };\n    },\n    /**\n     * 从高到低排序\n     */\n    compare_desc(property) {\n      return function (a, b) {\n        var value1 = a[property];\n        var value2 = b[property];\n        return value2 - value1;\n      };\n    },\n    /**\n     * 订单从低到高排序\n     */\n    sort_order_asc() {\n      this.list_diff.sort(this.compare_asc(\"sum_price\"));\n    },\n    /**\n     * 订单从高到低排序\n     */\n    sort_order_desc() {\n      this.list_diff.sort(this.compare_desc(\"sum_price\"));\n    },\n    /**\n     *获取订单前\n     @param { Object } param 用户user_id\n     */\n    get_list_before(param) {\n      param.user_id = this.$store.state.user.user_id;\n      return param;\n      for (let index = 0; index < array.length; index++) {\n        const element = array[index];\n      }\n    },\n    /**\n     * 获订单后\n     * @param {Object} json 响应对象\n     * @return { Object } 订单对象\n     */\n    get_list_after(json) {\n      // 根据订单号区分列表\n      var list_diff = [];\n      var order_num = \"\";\n      var index = -1;\n      json.result.list.map((o) => {\n        if (o.order_number === order_num) {\n          list_diff[index][\"list\"].push(o);\n          list_diff[index][\"sum_price\"] += o.price_count;\n        } else {\n          index += 1;\n          order_num = o.order_number;\n          list_diff[index] = {};\n          var obj_diff = list_diff[index];\n          obj_diff[\"create_time\"] = o.create_time;\n          obj_diff[\"order_number\"] = order_num;\n          obj_diff[\"list\"] = [];\n          obj_diff[\"list\"].push(o);\n          obj_diff[\"sum_price\"] = o.price_count;\n          obj_diff[\"state\"] = o.state;\n        }\n      });\n      this.list_diff = list_diff;\n      return json;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.page_order {\n  background-color: #f8f8f8;\n  min-height: 100vh;\n}\n.filter_block {\n  display: flex;\n  flex-direction: row;\n  justify-content: start;\n  margin-bottom: 10px;\n}\n.bar_filter {\n  display: flex;\n  align-items: center;\n}\nli {\n  list-style: none;\n}\n.bar_sort {\n  margin-left: 5px;\n}\n</style>\n"]}]}