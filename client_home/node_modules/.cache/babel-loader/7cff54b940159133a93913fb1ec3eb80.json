{"remainingRequest":"D:\\springboot\\client_home\\node_modules\\babel-loader\\lib\\index.js!D:\\springboot\\client_home\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\springboot\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\springboot\\client_home\\src\\views\\user\\info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\springboot\\client_home\\src\\views\\user\\info.vue","mtime":1677466920000},{"path":"D:\\springboot\\client_home\\babel.config.js","mtime":1677466920000},{"path":"D:\\springboot\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\springboot\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\springboot\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\springboot\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1peGluIGZyb20gIkAvbWl4aW5zL3BhZ2UuanMiOwppbXBvcnQgbGlzdF9tZW51X3VzZXIgZnJvbSAiQC9jb21wb25lbnRzL2RpeS9saXN0X21lbnVfdXNlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbbWl4aW5dLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cmxfZ2V0X29iajogIn4vYXBpL3VzZXIvZ2V0X29iaj8iLAogICAgICBxdWVyeTogewogICAgICAgIHVzZXJfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9pZAogICAgICB9LAogICAgICBkaXNwbGF5X2lucHV0OiAibm9uZSIsCiAgICAgIGRpc3BsYXlfbmFtZTogImJsb2NrIiwKICAgICAgZm9ybToge30sCiAgICAgIC8vIOi+k+WFpeiBmueEpgogICAgICBmb2N1c19pbnB1dDogZmFsc2UsCiAgICAgIGxpc3RfaW5mbzogW3sKICAgICAgICB0aXRsZTogIui1hOaWmeeuoeeQhiIsCiAgICAgICAgdXJsOiAiL3VzZXIvaW5mbyIsCiAgICAgICAgaWNvbjogIiIsCiAgICAgICAgc2VsZWN0ZWQ6IHRydWUKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi5a+G56CB566h55CGIiwKICAgICAgICB1cmw6ICIvdXNlci9wYXNzd29yZCIsCiAgICAgICAgaWNvbjogIiIsCiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuaUtuiXjyIsCiAgICAgICAgdXJsOiAiL3VzZXIvY29sbGVjdCIsCiAgICAgICAgaWNvbjogIiIsCiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlCiAgICAgIH1dLAogICAgICBmaWxlOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLyoqDQogICAgICog5L+u5pS55aS05YOPDQogICAgICogQHBhcmFtIHsgT2JqZWN0IH0gZmlsZXMg5LiK5Lyg5paH5Lu25a+56LGhDQogICAgICovCiAgICBhc3luYyBjaGFuZ2VfYXZhdGFyKGZpbGVzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm0uYXBwZW5kKCJmaWxlIiwgZmlsZXNbMF0pOwogICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kcG9zdCgifi9hcGkvdXNlci91cGxvYWQ/IiwgZm9ybSk7CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIGlmIChyZXMucmVzdWx0KSB7CiAgICAgICAgdmFyIGF2YXRhciA9IHJlcy5yZXN1bHQudXJsOwogICAgICAgIHRoaXMuJHBvc3QoIn4vYXBpL3VzZXIvc2V0P3VzZXJfaWQ9IiArIF90aGlzLnVzZXIudXNlcl9pZCwgewogICAgICAgICAgYXZhdGFyCiAgICAgICAgfSwgcmVzID0+IHsKICAgICAgICAgIHRoaXMudXNlci5hdmF0YXIgPSBhdmF0YXI7CiAgICAgICAgICB0aGlzLm9iai5hdmF0YXIgPSBhdmF0YXI7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kdG9hc3QocmVzLmVycm9yLm1lc3NhZ2UpOwogICAgICB9CiAgICB9LAogICAgLyoqDQogICAgICog6Lez5Ye65L+u5pS55pi156ew6L6T5YWl5qGGDQogICAgICovCiAgICBjaGFuZ2Vfbmlja25hbWUoKSB7CiAgICAgIHRoaXMuZGlzcGxheV9pbnB1dCA9ICJmbGV4IjsKICAgICAgdGhpcy5kaXNwbGF5X25hbWUgPSAibm9uZSI7CiAgICAgIHRoaXMuZm9jdXNfaW5wdXQgPSB0cnVlOwogICAgfSwKICAgIC8qKg0KICAgICAqIOS/neWtmOaYteensOS/ruaUuQ0KICAgICAqLwogICAgc2F2ZV9uaWNrbmFtZSgpIHsKICAgICAgdmFyIHVzZXJfaWQgPSB0aGlzLnVzZXIudXNlcl9pZDsKICAgICAgdmFyIG5pY2tuYW1lID0gdGhpcy5mb3JtLm5pY2tuYW1lOwogICAgICB0aGlzLiRwb3N0KCJ+L2FwaS91c2VyL3NldD91c2VyX2lkPSIgKyB1c2VyX2lkLCB7CiAgICAgICAgbmlja25hbWUKICAgICAgfSwgcmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHRoaXMuZm9jdXNfaW5wdXQgPSBmYWxzZTsKICAgICAgICB0aGlzLmRpc3BsYXlfaW5wdXQgPSAibm9uZSI7CiAgICAgICAgdGhpcy5kaXNwbGF5X25hbWUgPSAiYmxvY2siOwogICAgICAgIHRoaXMudXNlci5uaWNrbmFtZSA9IG5pY2tuYW1lOwogICAgICAgIHRoaXMub2JqLm5pY2tuYW1lID0gbmlja25hbWU7CiAgICAgIH0pOwogICAgfSwKICAgIGdldF9vYmpfYmVmb3JlKHBhcmFtcykgewogICAgICBwYXJhbXMudXNlcl9pZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9pZDsKICAgICAgcmV0dXJuIHBhcmFtczsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGxpc3RfbWVudV91c2VyCiAgfQp9Ow=="},{"version":3,"mappings":"AA0EA;AACA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,EACA;MACAC;IACA;EACA;EACAC;IACA;AACA;AACA;AACA;IACA;MACA;MACA;MACAR;MACA;MACAS;MACA;QACA;QACA,WACA;UACAC;QACA,GACAC;UACA;UACA;QACA,EACA;MACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;MACA,WACA;QACAC;MACA,GACAH;QACAF;QACA;QACA;QACA;QACA;QACA;MACA,EACA;IACA;IACAM;MACAC;MACA;IACA;EAEA;EACAC;IACAC;EACA;AACA","names":["mixins","data","url_get_obj","query","user_id","display_input","display_name","form","focus_input","list_info","title","url","icon","selected","file","methods","console","avatar","res","change_nickname","save_nickname","nickname","get_obj_before","params","components","list_menu_user"],"sourceRoot":"src/views/user","sources":["info.vue"],"sourcesContent":["<template>\r\n  <div class=\"page_user\" id=\"user_info\">\r\n    <div class=\"warp\">\r\n      <div class=\"container\">\r\n        <div>\r\n          <div class=\" col-md-12\">\r\n            <div class=\"\">\r\n              <!-- 左侧边栏 -->\r\n              <list_menu_user :list_info=\"list_info\"></list_menu_user>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-12 col-md-12\">\r\n            <div class=\"card_info pl-2\">\r\n              <!-- 个人资料 -->\r\n              <div class=\"div_info\">\r\n                <span> 个人资料 </span>\r\n                <div class=\"content_msg\">\r\n                  <div class=\"left_msg\">\r\n                    <div class=\"figure_avatar\">\r\n                      <span>头像：</span>\r\n                      <b-img class=\"user_avator\"\r\n                             :src=\"obj.avatar ? $fullUrl(obj.avatar) : '/img/default.png'\" alt=\"\"\r\n                             style=\"width: 3rem; height: 3rem\"/>\r\n                    </div>\r\n                    <div class=\"nickname\">\r\n                      <div>\r\n                        <span>昵称：</span>\r\n                      </div>\r\n                      <div :style=\"'display:' + display_name + ';'\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"font-size: 1.2rem; color: var(--color_grey)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ obj.nickname }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n                      </div>\r\n                      <div class=\"input_nickname\" :style=\"'display:' + display_input + ';'\">\r\n                        <input type=\"text\" id=\"nickname\" v-model=\"form.nickname\"\r\n                               :focus=\"focus_input\"/>\r\n                        <div class=\"btn_save\" @click=\"save_nickname()\">\r\n                          保存\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"right_msg\">\r\n                  <div class=\"change_avatar_box\">\r\n                    <div class=\"change_avatar\">\r\n                      <span>头像更改</span>\r\n                    </div>\r\n                    <div class=\"right_wrap\">\r\n                      <b-icon icon=\"arrow-right-square\"></b-icon>\r\n                    </div>\r\n                    <input type=\"file\" @change=\"change_avatar($event.target.files)\" id=\"input_file\"\r\n                           title=\" \"/>\r\n                  </div>\r\n                  <div class=\"change_nickname_box\" @click=\"change_nickname()\">\r\n                    <div class=\"change_nickname\">\r\n                      <span>昵称更改</span>\r\n                    </div>\r\n                    <div class=\"right_wrap\">\r\n                      <b-icon icon=\"arrow-right-square\"></b-icon>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import mixin from \"@/mixins/page.js\";\r\n  import list_menu_user from \"@/components/diy/list_menu_user.vue\";\r\n\r\n  export default {\r\n    mixins: [mixin],\r\n    data() {\r\n      return {\r\n        url_get_obj: \"~/api/user/get_obj?\",\r\n        query: {\r\n          user_id: this.$store.state.user.user_id\r\n        },\r\n        display_input: \"none\",\r\n        display_name: \"block\",\r\n        form: {},\r\n        // 输入聚焦\r\n        focus_input: false,\r\n        list_info: [{\r\n          title: \"资料管理\",\r\n          url: \"/user/info\",\r\n          icon: \"\",\r\n          selected: true,\r\n        },\r\n          {\r\n            title: \"密码管理\",\r\n            url: \"/user/password\",\r\n            icon: \"\",\r\n            selected: false,\r\n          },\r\n                                      {\r\n                title: \"收藏\",\r\n                url: \"/user/collect\",\r\n                icon: \"\",\r\n                selected: false,\r\n              },\r\n                                ],\r\n        file: null,\r\n      };\r\n    },\r\n    methods: {\r\n      /**\r\n       * 修改头像\r\n       * @param { Object } files 上传文件对象\r\n       */\r\n      async change_avatar(files) {\r\n        var _this = this;\r\n        var form = new FormData();\r\n        form.append(\"file\", files[0]);\r\n        var res = await this.$post(\"~/api/user/upload?\", form);\r\n        console.log(res)\r\n        if (res.result) {\r\n          var avatar = res.result.url;\r\n          this.$post(\r\n              \"~/api/user/set?user_id=\" + _this.user.user_id, {\r\n                avatar,\r\n              },\r\n              (res) => {\r\n                this.user.avatar = avatar;\r\n                this.obj.avatar = avatar;\r\n              }\r\n          );\r\n        } else {\r\n          this.$toast(res.error.message);\r\n        }\r\n      },\r\n      /**\r\n       * 跳出修改昵称输入框\r\n       */\r\n      change_nickname() {\r\n        this.display_input = \"flex\";\r\n        this.display_name = \"none\";\r\n        this.focus_input = true;\r\n      },\r\n      /**\r\n       * 保存昵称修改\r\n       */\r\n      save_nickname() {\r\n        var user_id = this.user.user_id;\r\n        var nickname = this.form.nickname;\r\n        this.$post(\r\n            \"~/api/user/set?user_id=\" + user_id, {\r\n              nickname,\r\n            },\r\n            (res) => {\r\n              console.log(res);\r\n              this.focus_input = false;\r\n              this.display_input = \"none\";\r\n              this.display_name = \"block\";\r\n              this.user.nickname = nickname;\r\n              this.obj.nickname = nickname;\r\n            }\r\n        );\r\n      },\r\n      get_obj_before(params) {\r\n        params.user_id = this.$store.state.user.user_id;\r\n        return params\r\n      }\r\n\r\n    },\r\n    components: {\r\n      list_menu_user,\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .container {\r\n    min-height: 800px;\r\n  }\r\n\r\n  .content_msg {\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 30px;\r\n    /* border-bottom: 1px solid var(--color_default_h);\r\n    margin-right: 5px; */\r\n  }\r\n\r\n  .figure_avatar {\r\n    padding: 5px;\r\n    height: 60px;\r\n    line-height: 60px;\r\n  }\r\n\r\n  .nickname {\r\n    display: flex;\r\n    padding: 5px;\r\n    line-height: 30px;\r\n  }\r\n\r\n  .input_nickname .btn_save {\r\n    width: 4rem;\r\n    text-align: center;\r\n    height: 31px;\r\n    line-height: 31px;\r\n    border: 1px solid var(--color_grey);\r\n    border-radius: 5px;\r\n    margin-right: 4px;\r\n  }\r\n\r\n  .btn_save:hover {\r\n    background-color: var(--color_success);\r\n    border: none;\r\n    color: white;\r\n  }\r\n\r\n  .right_msg {\r\n    margin: auto;\r\n  }\r\n\r\n  .right_msg .change_avatar_box {\r\n    cursor: pointer;\r\n    position: relative;\r\n    display: flex;\r\n    margin-left: 5px;\r\n  }\r\n\r\n  .right_wrap {\r\n    margin: 0 10px;\r\n  }\r\n\r\n  .right_msg .change_avatar_box #input_file {\r\n    cursor: pointer;\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    opacity: 0;\r\n    z-index: 1000;\r\n    font-size: 0;\r\n  }\r\n\r\n  .change_nickname_box {\r\n    margin-top: 10px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    margin-left: 5px;\r\n  }\r\n</style>\r\n"]}]}