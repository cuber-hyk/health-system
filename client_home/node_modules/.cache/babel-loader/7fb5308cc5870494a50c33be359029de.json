{"remainingRequest":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\babel-loader\\lib\\index.js!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\components\\diy\\list_cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\components\\diy\\list_cart.vue","mtime":1657768166000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\babel.config.js","mtime":1657768166000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgbGlzdDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIHZtOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBjYXJ0X2lkOiAiY2FydF9pZCIsCiAgICAgICAgICB0aXRsZTogInRpdGxlIiwKICAgICAgICAgIGltZzogImltZyIsCiAgICAgICAgICB1c2VyX2lkOiAidXNlcl9pZCIsCiAgICAgICAgICBzdGF0ZTogInN0YXRlIiwKICAgICAgICAgIHByaWNlOiAicHJpY2UiLAogICAgICAgICAgcHJpY2VfYWdvOiAicHJpY2VfYWdvIiwKICAgICAgICAgIHByaWNlX2NvdW50OiAicHJpY2VfY291bnQiLAogICAgICAgICAgbnVtOiAibnVtIiwKICAgICAgICAgIGdvb2RzX2lkOiAiZ29vZHNfaWQiLAogICAgICAgICAgZGVzY3JpcHRpb246ICJkZXNjcmlwdGlvbiIsCiAgICAgICAgICBzZWxlY3RlZDogInNlbGVjdGVkIgogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdW1fcHJpY2U6IDAsCiAgICAgIHNlbGVjdF9hbGxfZmxhZzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDoge30sCiAgbWV0aG9kczogewogICAgY291bnQoKSB7CiAgICAgIHZhciBzdW1fcHJpY2UgPSAwOwogICAgICB0aGlzLmxpc3QubWFwKG8gPT4gewogICAgICAgIGlmIChvLnNlbGVjdGVkKSB7CiAgICAgICAgICBzdW1fcHJpY2UgPSBwYXJzZUZsb2F0KHN1bV9wcmljZSkgKyBwYXJzZUZsb2F0KG8ucHJpY2VfY291bnQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBzdW1fcHJpY2U7CiAgICB9LAogICAgc2VsZWN0ZWRBbGwoKSB7CiAgICAgIHJldHVybiB0aGlzLmxpc3QuZXZlcnkobyA9PiBvLnNlbGVjdGVkKTsKICAgIH0sCiAgICAvKioKICAgICAqIOWinuWKoOaVsOmHjwogICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiDllYblk4Hlr7nosaEKICAgICAqLwogICAgYWRkX251bShvYmopIHsKICAgICAgdmFyIHsKICAgICAgICBjYXJ0X2lkLAogICAgICAgIG51bSwKICAgICAgICBwcmljZSwKICAgICAgICBwcmljZV9jb3VudAogICAgICB9ID0gb2JqOwogICAgICBudW0gPSBwYXJzZUludChudW0pICsgMTsKICAgICAgcHJpY2VfY291bnQgPSBwYXJzZUZsb2F0KHByaWNlX2NvdW50KSArIHBhcnNlRmxvYXQocHJpY2UpOwogICAgICB0aGlzLiRwb3N0KGB+L2FwaS9jYXJ0L3NldD9jYXJ0X2lkPSR7Y2FydF9pZH1gLCB7CiAgICAgICAgbnVtLAogICAgICAgIHByaWNlLAogICAgICAgIHByaWNlX2NvdW50CiAgICAgIH0sIHJlcyA9PiB7CiAgICAgICAgdGhpcy5saXN0Lm1hcChvID0+IHsKICAgICAgICAgIGlmIChvLmNhcnRfaWQgPT09IGNhcnRfaWQpIHsKICAgICAgICAgICAgby5udW0gPSBudW0sIG8ucHJpY2VfY291bnQgPSBwcmljZV9jb3VudDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlh4/lsJHmlbDph48KICAgICAqIEBwYXJhbSB7IE9iamVjdCB9IG9iaiDllYblk4Hlr7nosaEKICAgICAqIEBwYXJhbSB7IE9iamVjdH0gaSDop4TlrprliKDpmaTpobnnm67nmoTkvY3nva4KICAgICAqLwogICAgc3ViX251bShvYmosIGkpIHsKICAgICAgdmFyIHsKICAgICAgICBjYXJ0X2lkLAogICAgICAgIG51bSwKICAgICAgICBwcmljZSwKICAgICAgICBwcmljZV9jb3VudAogICAgICB9ID0gb2JqOwogICAgICBudW0gPSBwYXJzZUludChudW0pIC0gMTsKICAgICAgcHJpY2VfY291bnQgPSBwYXJzZUZsb2F0KHByaWNlX2NvdW50KSAtIHBhcnNlRmxvYXQocHJpY2UpOwogICAgICBpZiAobnVtID09PSAwKSB7CiAgICAgICAgdGhpcy4kZ2V0KGB+L2FwaS9jYXJ0L2RlbD9jYXJ0X2lkPSR7Y2FydF9pZH1gLCB7fSwgcmVzID0+IHsKICAgICAgICAgIHRoaXMubGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcG9zdChgfi9hcGkvY2FydC9zZXQ/Y2FydF9pZD0ke2NhcnRfaWR9YCwgewogICAgICAgICAgbnVtLAogICAgICAgICAgcHJpY2UsCiAgICAgICAgICBwcmljZV9jb3VudAogICAgICAgIH0sIHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmxpc3QubWFwKG8gPT4gewogICAgICAgICAgICBpZiAoby5jYXJ0X2lkID09PSBjYXJ0X2lkKSB7CiAgICAgICAgICAgICAgby5udW0gPSBudW07CiAgICAgICAgICAgICAgby5wcmljZV9jb3VudCA9IHByaWNlX2NvdW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICog5Yig6Zmk6LSt54mp6L2mCiAgICAgKiBAcGFyYW0geyBPYmplY3QgfSBvYmog5ZWG5ZOB5a+56LGhCiAgICAgKiBAcGFyYW0geyBOdW1iZXJ9IGkg6KeE5a6a5Yig6Zmk6aG555uu55qE5L2N572uCiAgICAgKi8KICAgIGRlbF9jYXJ0KG8sIGkpIHsKICAgICAgdGhpcy4kZ2V0KGB+L2FwaS9jYXJ0L2RlbD9jYXJ0X2lkPSR7by5jYXJ0X2lkfWAsIHt9LCByZXMgPT4gewogICAgICAgIHRoaXMubGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog6YCJ5oupCiAgICAgKiBAcGFyYW0geyBPYmplY3QgfSBvIOmAieaLqeWvueixoQogICAgICovCiAgICBzZWxlY3RfZnVuYyhvLCBpKSB7CiAgICAgIG8uc2VsZWN0ZWQgPSAhby5zZWxlY3RlZDsKICAgICAgdGhpcy4kc2V0KHRoaXMubGlzdCwgaSwgbyk7CiAgICAgIHRoaXMuc2VsZWN0X2FsbF9mbGFnID0gdGhpcy5zZWxlY3RlZEFsbCgpOwogICAgfSwKICAgIC8qKgogICAgICog5YWo6YCJCiAgICAgKi8KICAgIHNlbGVjdF9hbGwoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkQWxsKCkpIHsKICAgICAgICB0aGlzLmxpc3QubWFwKG8gPT4gewogICAgICAgICAgby5zZWxlY3RlZCA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2VsZWN0X2FsbF9mbGFnID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5saXN0Lm1hcChvID0+IHsKICAgICAgICAgIG8uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2VsZWN0X2FsbF9mbGFnID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICog5qC55o2u5b2T5YmN5pe26Ze05ZKM6ZqP5py65pWw55Sf5oiQ5rWB5rC05Y+3CiAgICAgKi8KICAgIG9yZGVyX2NvZGUoKSB7CiAgICAgIHZhciBvcmRlckNvZGUgPSAiIjsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2OyBpKysgLy825L2N6ZqP5py65pWw77yM55So5Lul5Yqg5Zyo5pe26Ze05oiz5ZCO6Z2i44CCCiAgICAgICkgewogICAgICAgIG9yZGVyQ29kZSArPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7CiAgICAgIH0KICAgICAgb3JkZXJDb2RlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBvcmRlckNvZGU7IC8v5pe26Ze05oiz77yM55So5p2l55Sf5oiQ6K6i5Y2V5Y+344CCCiAgICAgIHJldHVybiBvcmRlckNvZGU7CiAgICB9LAogICAgLyoqCiAgICAgKiDlvILmraXljZXkuKrnu5PnrpcKICAgICAqIEBwYXJhbSB7IE9iamVjdCB9IG9iaiDnu5Pnrpflr7nosaEKICAgICAqIEBwYXJhbSB7IE51bWJlciB9IGluZGV4IOinhOWumuWIoOmZpOmhueebrueahOS9jee9rgogICAgICogQHBhcmFtIHsgT2JqZWN0IH0gb3JkZXJfbnVtYmVyIOiuouWNlee8luWPtwogICAgICovCiAgICBhc3luYyBzZXR0bGVfb25lKG9iaiwgaW5kZXgsIG9yZGVyX251bWJlciwgYWRkcmVzcykgewogICAgICAvLyDojrflj5booqvpgInkuK3nmoTllYblk4EKICAgICAgdmFyIHsKICAgICAgICB0aXRsZSwKICAgICAgICBpbWcsCiAgICAgICAgcHJpY2UsCiAgICAgICAgcHJpY2VfYWdvLAogICAgICAgIHByaWNlX2NvdW50LAogICAgICAgIG51bSwKICAgICAgICB0eXBlLAogICAgICAgIGdvb2RzX2lkLAogICAgICAgIGRlc2NyaXB0aW9uLAogICAgICAgIHVzZXJfaWQsCiAgICAgICAgY2FydF9pZAogICAgICB9ID0gb2JqOwogICAgICAvLyDor7fmsYLlj4LmlbAKICAgICAgdmFyIGJvZHkgPSB7CiAgICAgICAgb3JkZXJfbnVtYmVyLAogICAgICAgIHRpdGxlLAogICAgICAgIGltZywKICAgICAgICBwcmljZSwKICAgICAgICBwcmljZV9hZ28sCiAgICAgICAgcHJpY2VfY291bnQsCiAgICAgICAgbnVtLAogICAgICAgIHR5cGUsCiAgICAgICAgZ29vZHNfaWQsCiAgICAgICAgZGVzY3JpcHRpb24sCiAgICAgICAgImNvbnRhY3RfbmFtZSI6IGFkZHJlc3Mub2JqLm5hbWUsCiAgICAgICAgImNvbnRhY3RfcGhvbmUiOiBhZGRyZXNzLm9iai5waG9uZSwKICAgICAgICAiY29udGFjdF9hZGRyZXNzIjogYWRkcmVzcy5vYmouYWRkcmVzcywKICAgICAgICAicG9zdGFsX2NvZGUiOiBhZGRyZXNzLm9iai5wb3N0Y29kZSwKICAgICAgICB1c2VyX2lkCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKGJvZHkpOwogICAgICAvLyDlu7bov5/lj5HpgIHmt7vliqDorqLljZXor7fmsYIKICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIHRoaXMuJHBvc3QoIn4vYXBpL29yZGVyL2FkZD8iLCBib2R5LCByZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5yZXN1bHQpIHsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgLy/liKDpmaTotK3nianovaYKICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIHRoaXMuJGdldCgifi9hcGkvY2FydC9kZWw/IiwgewogICAgICAgICAgY2FydF9pZAogICAgICAgIH0sIHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnJlc3VsdCkgewogICAgICAgICAgICB0aGlzLmxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOmAieS4reeahOe7k+eulwogICAgICovCiAgICBhc3luYyBzZXR0bGVfYWxsKCkgewogICAgICAvLyDmn6Xor6LlupPlrZgKICAgICAgbGV0IGZsYWcgPSBmYWxzZTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5saXN0W2ldLnNlbGVjdGVkKSB7CiAgICAgICAgICBsZXQgZ29vZHNfanNvbiA9IGF3YWl0IHRoaXMuJGdldCgifi9hcGkvZ29vZHMvZ2V0X29iaj8iLCB7CiAgICAgICAgICAgICJnb29kc19pZCI6IHRoaXMubGlzdFtpXS5nb29kc19pZAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoZ29vZHNfanNvbi5yZXN1bHQgJiYgZ29vZHNfanNvbi5yZXN1bHQub2JqKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RbaV0ubnVtID4gZ29vZHNfanNvbi5yZXN1bHQub2JqLmludmVudG9yeSkgewogICAgICAgICAgICAgIGZsYWcgPSB0cnVlOwogICAgICAgICAgICAgIHRoaXMuJHRvYXN0KCLlupPlrZjkuI3otrMiKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZmxhZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvL+eUn+aIkOiuouWNleWPtwogICAgICB2YXIgb3JkZXJfbnVtYmVyID0gdGhpcy5vcmRlcl9jb2RlKCk7CiAgICAgIC8vIOiOt+WPluiBlOezu+aWueW8jwogICAgICB0aGlzLiRnZXQoIn4vYXBpL2FkZHJlc3MvZ2V0X29iaj8iLCB7CiAgICAgICAgdXNlcl9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyX2lkLAogICAgICAgIGRlZmF1bHQ6IDEKICAgICAgfSwgcmVzID0+IHsKICAgICAgICBpZiAocmVzLnJlc3VsdCkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzLnJlc3VsdCk7CiAgICAgICAgICAvLyDpgInlh7rpgInkuK3nmoTnianlk4EKICAgICAgICAgIHZhciBsaXN0X3NldHRsZSA9IHRoaXMubGlzdC5tYXAoYXN5bmMgKG8sIGkpID0+IHsKICAgICAgICAgICAgaWYgKG8uc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRsZV9vbmUobywgaSwgb3JkZXJfbnVtYmVyLCByZXMucmVzdWx0KTsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL29yZGVyL2RldGFpbHM/b3JkZXJfbnVtYmVyPSIgKyBvcmRlcl9udW1iZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJHRvYXN0KCLliqDlhaXorqLljZXmiJDlip8iKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdG9hc3QoIuWcsOWdgOacqua3u+WKoCIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDliKTmlq3mmK/lkKblnKjlvq7kv6HlsI/nqIvluo8KICAgICAqIEByZXR1cm4geyBCb29sZWFuIH0KICAgICAqLwogICAgaXNfd3hfZW52KCkgewogICAgICAvLyDliKTmlq3mmK/lkKblnKjlvq7kv6HlsI/nqIvluo/kuK3miZPlvIAKICAgICAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICB2YXIgYm9vbCA9IGZhbHNlOwogICAgICBpZiAodWEubWF0Y2goL01pY3JvTWVzc2VuZ2VyL2kpID09ICJtaWNyb21lc3NlbmdlciIpIHsKICAgICAgICAvL+WIpOaWreaYr+WQpuaYr+W+ruS/oeeOr+WigwogICAgICAgIC8v5b6u5L+h546v5aKD5LiLCiAgICAgIH0KICAgICAgcmV0dXJuIGJvb2w7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";AAmGA;AACA;EACAA;IACAC;MACAC;MACAC;QACA;MACA;IACA;IACAC;MACAF;MACAC;QACA;UACAE;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC,WACA;EACAC;IACAC;MACA;MACA;QACA;UACAJ;QACA;MACA;MACA;IACA;IACAK;MACA;IACA;IACA;AACA;AACA;AACA;IACAC;MACA;QAAAnB;QAAAQ;QAAAH;QAAAE;MAAA;MACAC;MACAD;MACA,WACA,qCACA;QACAC;QACAH;QACAE;MACA,GACAa;QACA;UACA;YACAC;UACA;QACA;MACA,EACA;IACA;IACA;AACA;AACA;AACA;AACA;IACAC;MACA;QAAAtB;QAAAQ;QAAAH;QAAAE;MAAA;MACAC;MACAD;MACA;QACA;UACA;QACA;MACA;QACA,WACA,qCACA;UACAC;UACAH;UACAE;QACA,GACAa;UACA;YACA;cACAC;cACAA;YACA;UACA;QACA,EACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;IACAE;MACA;QACA;MACA;IACA;IACA;AACA;AACA;AACA;IACAC;MACAH;MACA;MACA;IACA;IACA;AACA;AACA;IACAI;MACA;QACA;UACAJ;QACA;QACA;MACA;QACA;UACAA;QACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAK;MACA;MACA,KACA,WACAC,OACAA;MAAA,EACA;QACAC;MACA;MACAA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;IACA;MACA;MACA;QACA3B;QACAC;QACAG;QACAC;QACAC;QACAC;QACAX;QACAY;QACAC;QACAP;QACAH;MACA;MACA;MACA;QACA6B;QACA5B;QACAC;QACAG;QACAC;QACAC;QACAC;QACAX;QACAY;QACAC;QACA;QACA;QACA;QACA;QACAP;MACA;MACA2B;MACA;MACA;QACA;UACA;YACAC;UACA;QACA;MACA;MACA;MACA;QACA,UACA,mBACA;UACA/B;QACA,GACAoB;UACA;YACA;YACAW;UACA;QACA,EACA;MACA;IACA;IACA;AACA;AACA;IACA;MACA;MACA;MACA;QACA;UACA;YAAA;UAAA;UACA;YACA;cACAC;cACA;cACA;YACA;UACA;QACA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;MACA,UACA,0BACA;QACA7B;QACAL;MACA,GACAsB;QACA;UACAU;UACA;UACA;YACA;cACA;cACA;YACA;UACA;UACA;QACA;UACA;UACA;QACA;MACA,EACA;IACA;IACA;AACA;AACA;AACA;IACAG;MACA;MACA;MACA;MACA;MACA;QACA;QACA;MAAA;MAEA;IACA;EACA;AACA","names":["props","list","type","default","vm","cart_id","title","img","user_id","state","price","price_ago","price_count","num","goods_id","description","selected","data","sum_price","select_all_flag","computed","methods","count","selectedAll","add_num","res","o","sub_num","del_cart","select_func","select_all","order_code","i","orderCode","order_number","console","resolve","flag","is_wx_env"],"sourceRoot":"src/components/diy","sources":["list_cart.vue"],"sourcesContent":["<template>\n  <div class=\"cart_block\">\n    <div class=\"list_cart\">\n      <div class=\"item_cart\" v-for=\"(o, i) in list\" :key=\"i\">\n        <!-- 选择按钮 -->\n        <div\n          class=\"choose_btn\"\n          :class=\"{ active: o[vm.selected] }\"\n          @click=\"select_func(o,i)\"\n        >\n          <div class=\"btn_circle\">\n            <span class=\"icon_wrap\">\n              <b-icon v-if=\"o[vm.selected]\" icon=\"check\"></b-icon>\n            </span>\n          </div>\n        </div>\n        <div class=\"cart_body\">\n          <div class=\"img_block\">\n            <img :src=\"$fullUrl(o[vm.img])\" />\n          </div>\n\n          <div class=\"right_info\">\n            <div class=\"title ellipsis_2\">\n              {{ o[vm.title] }}\n            </div>\n            <!-- 删除商品 -->\n             <!-- v-if=\"$check_action('/cart/list', 'del')\" -->\n            <div\n              class=\"btn_del\"\n              @click=\"del_cart(o, i)\"\n            >\n              <b-icon\n                type=\"trash\"\n                class=\"icon_del\"\n                color=\"var(--color_grey)\"\n                icon=\"trash\"\n              ></b-icon>\n            </div>\n            <!-- v-if=\"$check_action('/cart/details', 'set')\" -->\n            <div class=\"bottom_price\">\n              <div class=\"price\">\n                <span>￥{{ o[vm.price] }}</span>\n                <span class=\"price_ago\">￥{{ o[vm.price_ago] }}</span>\n              </div>\n              <div\n                class=\"handle_num\"\n              >\n                <div class=\"subtract\" @click=\"sub_num(o, i)\">\n                  <span>-</span>\n                </div>\n                <div class=\"num\">\n                  {{ o[vm.num] }}\n                </div>\n                <div class=\"add\" @click=\"add_num(o)\">\n                  <span>+</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 全选 -->\n    <div class=\"bar_settle\" v-if=\"$check_action('/order/list', 'add')\">\n      <div\n        class=\"choose_btn\"\n        :class=\"{ active: select_all_flag }\"\n        @click=\"select_all()\"\n      >\n        <div class=\"btn_circle\">\n          <b-icon\n            style=\"color: #fff; font-size: 0.3rem\"\n            v-if=\"select_all_flag\"\n            icon=\"check\"\n          ></b-icon>\n        </div>\n        <span>全选</span>\n      </div>\n      <div class=\"right_settle\">\n        <div class=\"sum_block\">\n          <span>共计：</span>\n          <span class=\"sum\">￥{{ count() }}</span>\n        </div>\n        <div class=\"settle\">\n          <button\n            class=\"btn_settle\"\n            color=\"#fff\"\n            @click=\"settle_all()\"\n            size=\"mini\"\n          >\n            购买\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import  axios from \"axios\"\nexport default {\n  props: {\n    list: {\n      type: Array,\n      default: function () {\n        return [];\n      },\n    },\n    vm: {\n      type: Object,\n      default: function () {\n        return {\n          cart_id: \"cart_id\",\n          title: \"title\",\n          img: \"img\",\n          user_id: \"user_id\",\n          state: \"state\",\n          price: \"price\",\n          price_ago: \"price_ago\",\n          price_count: \"price_count\",\n          num: \"num\",\n          goods_id: \"goods_id\",\n          description: \"description\",\n          selected: \"selected\",\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      sum_price: 0,\n      select_all_flag:false\n    };\n  },\n  computed: {\n  },\n  methods: {\n    count() {\n      var sum_price = 0;\n      this.list.map((o) => {\n        if (o.selected) {\n          sum_price = parseFloat(sum_price) + parseFloat(o.price_count);\n        }\n      });\n      return sum_price;\n    },\n    selectedAll() {\n      return this.list.every((o) => o.selected);\n    },\n    /**\n     * 增加数量\n     * @param {Object} obj 商品对象\n     */\n    add_num(obj) {\n      var { cart_id, num, price, price_count } = obj;\n      num = parseInt(num) + 1;\n      price_count = parseFloat(price_count) + parseFloat(price);\n      this.$post(\n        `~/api/cart/set?cart_id=${cart_id}`,\n        {\n          num,\n          price,\n          price_count,\n        },\n        (res) => {\n          this.list.map((o) => {\n            if (o.cart_id === cart_id) {\n              (o.num = num), (o.price_count = price_count);\n            }\n          });\n        }\n      );\n    },\n    /**\n     * 减少数量\n     * @param { Object } obj 商品对象\n     * @param { Object} i 规定删除项目的位置\n     */\n    sub_num(obj, i) {\n      var { cart_id, num, price, price_count } = obj;\n      num = parseInt(num) - 1;\n      price_count = parseFloat(price_count) - parseFloat(price);\n      if (num === 0) {\n        this.$get(`~/api/cart/del?cart_id=${cart_id}`, {}, (res) => {\n          this.list.splice(i, 1);\n        });\n      } else {\n        this.$post(\n          `~/api/cart/set?cart_id=${cart_id}`,\n          {\n            num,\n            price,\n            price_count,\n          },\n          (res) => {\n            this.list.map((o) => {\n              if (o.cart_id === cart_id) {\n                o.num = num;\n                o.price_count = price_count;\n              }\n            });\n          }\n        );\n      }\n    },\n    /**\n     * 删除购物车\n     * @param { Object } obj 商品对象\n     * @param { Number} i 规定删除项目的位置\n     */\n    del_cart(o, i) {\n      this.$get(`~/api/cart/del?cart_id=${o.cart_id}`, {}, (res) => {\n        this.list.splice(i, 1);\n      });\n    },\n    /**\n     * 选择\n     * @param { Object } o 选择对象\n     */\n    select_func(o,i) {\n      o.selected = !o.selected;\n      this.$set(this.list,i,o);\n      this.select_all_flag =this.selectedAll();\n    },\n    /**\n     * 全选\n     */\n    select_all() {\n      if (this.selectedAll()) {\n        this.list.map((o) => {\n          o.selected = false;\n        });\n        this.select_all_flag = false;\n      } else {\n        this.list.map((o) => {\n          o.selected = true;\n        });\n        this.select_all_flag = true;\n      }\n    },\n    /**\n     * 根据当前时间和随机数生成流水号\n     */\n    order_code() {\n      var orderCode = \"\";\n      for (\n        var i = 0;\n        i < 6;\n        i++ //6位随机数，用以加在时间戳后面。\n      ) {\n        orderCode += Math.floor(Math.random() * 10);\n      }\n      orderCode = new Date().getTime() + orderCode; //时间戳，用来生成订单号。\n      return orderCode;\n    },\n    /**\n     * 异步单个结算\n     * @param { Object } obj 结算对象\n     * @param { Number } index 规定删除项目的位置\n     * @param { Object } order_number 订单编号\n     */\n    async settle_one(obj, index, order_number,address) {\n      // 获取被选中的商品\n      var {\n        title,\n        img,\n        price,\n        price_ago,\n        price_count,\n        num,\n        type,\n        goods_id,\n        description,\n        user_id,\n        cart_id,\n      } = obj;\n      // 请求参数\n      var body = {\n        order_number,\n        title,\n        img,\n        price,\n        price_ago,\n        price_count,\n        num,\n        type,\n        goods_id,\n        description,\n        \"contact_name\":address.obj.name,\n        \"contact_phone\":address.obj.phone,\n        \"contact_address\":address.obj.address,\n        \"postal_code\":address.obj.postcode,\n        user_id,\n      };\n      console.log(body)\n      // 延迟发送添加订单请求\n      await new Promise((resolve, reject) => {\n        this.$post(\"~/api/order/add?\", body, (res) => {\n          if (res.result) {\n            resolve();\n          }\n        });\n      });\n      //删除购物车\n      await new Promise((resolve, reject) => {\n        this.$get(\n          \"~/api/cart/del?\",\n          {\n            cart_id,\n          },\n          (res) => {\n            if (res.result) {\n              this.list.splice(index, 1);\n              resolve();\n            }\n          }\n        );\n      });\n    },\n    /**\n     * 选中的结算\n     */\n    async settle_all() {\n      // 查询库存\n      let flag = false;\n      for (let i=0;i<this.list.length;i++){\n        if (this.list[i].selected) {\n          let goods_json = await this.$get(\"~/api/goods/get_obj?\", {\"goods_id\": this.list[i].goods_id});\n            if (goods_json.result && goods_json.result.obj) {\n              if (this.list[i].num>goods_json.result.obj.inventory){\n                flag = true\n                this.$toast(\"库存不足\");\n                break;\n              }\n            }\n        }\n      }\n      if (flag){\n        return;\n      }\n      //生成订单号\n      var order_number = this.order_code();\n      // 获取联系方式\n      this.$get(\n              \"~/api/address/get_obj?\",\n              {\n                user_id:this.$store.state.user.user_id,\n                default: 1,\n              },\n              (res) => {\n                if (res.result) {\n                  console.log(res.result);\n                  // 选出选中的物品\n                  var list_settle = this.list.map(async (o, i) => {\n                    if (o.selected) {\n                      await this.settle_one(o, i, order_number,res.result);\n                      this.$router.push(\"/order/details?order_number=\" + order_number);\n                    }\n                  });\n                  this.$toast(\"加入订单成功\");\n                } else {\n                  this.$toast(\"地址未添加\");\n                  return;\n                }\n              }\n      );\n    },\n    /**\n     * 判断是否在微信小程序\n     * @return { Boolean }\n     */\n    is_wx_env() {\n      // 判断是否在微信小程序中打开\n      var ua = window.navigator.userAgent.toLowerCase();\n      let that = this;\n      var bool = false;\n      if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\n        //判断是否是微信环境\n        //微信环境下\n      }\n      return bool;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.ellipsis_2 {\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n.cart_block {\n  min-height: 580px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n.list_cart {\n  margin: 5px 5px;\n  background-color: #fff;\n  border-radius: 1rem;\n  margin-bottom: 5rem;\n}\n\n.list_cart .item_cart {\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  padding: 0.6rem;\n}\n\n.list_cart .item_cart + .item_cart {\n  border-top: 1px solid #eee;\n}\n\n.list_cart .choose_btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.list_cart .choose_btn .circle {\n  width: 1rem;\n  height: 1rem;\n  border-radius: 50%;\n}\n\n.list_cart .choose_btn .btn_circle {\n  display: inline-block;\n  width: 0.9rem;\n  height: 0.9rem;\n  margin-right: 0.5rem;\n  border-radius: 50%;\n  border: 1px solid var(--color_grey);\n  cursor: pointer;\n}\n.list_cart .choose_btn .btn_circle .icon_wrap {\n  color: #fff;\n  position: relative;\n  top: -1px;\n}\n.list_cart .choose_btn.active {\n  color: var(--color_primary);\n}\n\n.list_cart .choose_btn.active .btn_circle {\n  background-color: var(--color_primary);\n  border: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.list_cart .cart_body {\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  width: 90%;\n}\n.list_cart .cart_body .img_block {\n  width: 200px;\n  min-height: 100px;\n  max-height: 200px;\n}\n.list_cart .cart_body .img_block img {\n  width: 100%;\n  height: 100%;\n}\n.list_cart .right_info {\n  width: calc(100% - 4.5rem);\n  padding-left: 0.6rem;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n}\n\n.list_cart .title {\n  font-size: 0.6rem;\n  width: 85%;\n  margin-top: 15px;\n}\n\n.list_cart .btn_del {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 2.2rem;\n  height: 2.2rem;\n  line-height: 2.2rem;\n  text-align: center;\n  cursor: pointer;\n  border: 1px solid var(--color_default);\n  border-radius: 5px;\n  font-size: 18px;\n  background: var(--color_default);\n}\n.icon_del {\n  color: white;\n}\n.list_cart .btn_del:hover {\n  background: var(--color_primary_b);\n  border-color: var(--color_primary_b);\n}\n.list_cart .bottom_price {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.list_cart .price {\n  color: var(--color_red);\n  font-weight: bold;\n  font-size: 1rem;\n}\n\n.list_cart .price_ago {\n  margin-left: 0.2em;\n  text-decoration: line-through;\n  font-size: 0.7rem;\n  color: #999;\n}\n\n.list_cart .handle_num {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n}\n\n.list_cart .handle_num > div {\n  height: 25px;\n  width: 25px;\n  text-align: center;\n  margin-left: 10px;\n}\n\n.list_cart .subtract,\n.add {\n  border: 1px solid #eee;\n  border-radius: 50%;\n  color: #919191;\n  background-color: #eee;\n}\n\n.list_cart .handle_num span {\n  position: relative;\n  top: -1px;\n}\n\n.list_cart .handle_num .num {\n  width: 1.4rem;\n}\n\n.bar_settle {\n  width: 100%;\n  height: 2.5rem;\n  background-color: #fff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 0.8rem;\n  border-top: 1px solid #eee;\n}\n\n.bar_settle .choose_btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n\n.bar_settle .choose_btn .circle {\n  width: 1rem;\n  height: 1rem;\n  border-radius: 50%;\n}\n\n.bar_settle .choose_btn .btn_circle {\n  display: inline-block;\n  width: 0.9rem;\n  height: 0.9rem;\n  margin-right: 0.5rem;\n  border-radius: 50%;\n  border: 1px solid var(--color_grey);\n}\n\n.bar_settle .choose_btn.active {\n  color: var(--color_primary);\n}\n\n.bar_settle .choose_btn.active .btn_circle {\n  background-color: var(--color_primary);\n  border: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.bar_settle .right_settle {\n  display: flex;\n  justify-content: space-between;\n}\n\n.bar_settle .sum_block {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-right: 0.5rem;\n}\n\n.bar_settle .sum {\n  color: var(--color_red);\n}\n\n.bar_settle .settle {\n  display: flex;\n  align-items: center;\n}\n\n.bar_settle .btn_settle {\n  color: #fff;\n  border-radius: 5rem;\n  background-color: var(--color_red);\n}\n\n.bar_settle .button-hover {\n  opacity: 0.8;\n}\n</style>\n"]}]}