{"remainingRequest":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\components\\diy\\list_goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\components\\diy\\list_goods.vue","mtime":1657768166000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglleHBvcnQgZGVmYXVsdCB7CgkJcHJvcHM6IHsKCQkJdXJsOiB7CgkJCQl0eXBlOiBTdHJpbmcsCgkJCQlkZWZhdWx0OiAiL3BhZ2VzL2dvb2RzL2RldGFpbHM/Z29vZHNfaWQ9IiwKCQkJfSwKCQkJbGlzdDogewoJCQkJdHlwZTogQXJyYXksCgkJCQlkZWZhdWx0OiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gW107CgkJCQl9LAoJCQl9LAoJCQl2bTogewoJCQkJdHlwZTogT2JqZWN0LAoJCQkJZGVmYXVsdDogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJZ29vZHNfaWQ6ICJnb29kc19pZCIsCgkJCQkJCWltZzogImltZyIsCgkJCQkJCXRpdGxlOiAidGl0bGUiLAoJCQkJCQlwcmljZTogInByaWNlIiwKCQkJCQkJcHJpY2VfYWdvOiAicHJpY2VfYWdvIiwKCQkJCQkJc291cmNlX3RhYmxlOiJzb3VyY2VfdGFibGUiCgkJCQkJfTsKCQkJCX0sCgkJCX0sCgkJfSwKCQlkYXRhKCkgewoJCQlyZXR1cm4gewoJCQkJdXNlcl9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyX2lkCgkJCX07CgkJfSwKCQltZXRob2RzOiB7CgkJCS8qKgoJCQkgKiDmt7vliqDotK3nianovaYKCQkJICovCgkJCWFkZF9jYXJ0KG9iaikgewoJCQkgICAgdmFyIHsKCQkJICAgICAgICB0aXRsZSwKCQkJICAgICAgICBpbWcsCgkJCSAgICAgICAgcHJpY2UsCgkJCSAgICAgICAgcHJpY2VfYWdvLAoJCQkgICAgICAgIG51bV9idXk6IG51bSwKCQkJICAgICAgICBkZXNjcmlwdGlvbiwKCQkJICAgICAgICBnb29kc19pZCwKCQkJICAgICAgICB0eXBlLAoJCQkgICAgfSA9IG9iajsKCQkJICAgIHZhciBib2R5ID0gewoJCQkgICAgICAgIHRpdGxlLAoJCQkgICAgICAgIGltZywKCQkJICAgICAgICBwcmljZSwKCQkJICAgICAgICBwcmljZV9hZ28sCgkJCSAgICAgICAgbnVtLAoJCQkgICAgICAgIHByaWNlX2NvdW50OiBwcmljZSwKCQkJICAgICAgICBkZXNjcmlwdGlvbiwKCQkJICAgICAgICBnb29kc19pZCwKCQkJICAgICAgICB0eXBlLAoJCQkgICAgICAgIHVzZXJfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9pZCwKCQkJICAgIH07CgkJCQlib2R5Lm51bSA9IDE7CgoJCQkgICAgdGhpcy4kZ2V0KCJ+L2FwaS9jYXJ0L2dldF9saXN0PyIsIHsKCQkJICAgICAgICBnb29kc19pZDogb2JqLmdvb2RzX2lkLAoJCQkJCXVzZXJfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9pZAoJCQkgICAgfSwgKHJlcykgPT4gewoJCQkgICAgICAgIGNvbnNvbGUubG9nKHJlcykKCQkJICAgICAgICBpZiAocmVzLnJlc3VsdC5jb3VudCkgewoJCQkgICAgICAgICAgICB2YXIge2NhcnRfaWQsIG51bSwgcHJpY2UsIHByaWNlX2NvdW50fSA9IHJlcy5yZXN1bHQubGlzdFswXTsKCQkJICAgICAgICAgICAgbnVtICs9IDE7CgkJCSAgICAgICAgICAgIHByaWNlX2NvdW50ICs9IHByaWNlOwoJCQkgICAgICAgICAgICB0aGlzLiRwb3N0KAoJCQkgICAgICAgICAgICAgICAgYH4vYXBpL2NhcnQvc2V0P2NhcnRfaWQ9JHtjYXJ0X2lkfWAsCgkJCSAgICAgICAgICAgICAgICB7CgkJCSAgICAgICAgICAgICAgICAgICAgbnVtLAoJCQkgICAgICAgICAgICAgICAgICAgIHByaWNlLAoJCQkgICAgICAgICAgICAgICAgICAgIHByaWNlX2NvdW50LAoJCQkgICAgICAgICAgICAgICAgfSwKCQkJICAgICAgICAgICAgICAgIChyZXMpID0+IHsKCQkJICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCgi5bey5Yqg5YWl6LSt54mp6L2mIiwgIuaIkOWKnyIpOwoJCQkgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLmm7TmlLnlgLwiKQoJCQkgICAgICAgICAgICAgICAgfQoJCQkgICAgICAgICAgICApOwoJCQkgICAgICAgIH0gZWxzZSB7CgkJCSAgICAgICAgICAgIHRoaXMuJHBvc3QoIn4vYXBpL2NhcnQvYWRkPyIsIGJvZHksIChyZXMpID0+IHsKCQkJICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KCLlt7LliqDlhaXotK3nianovaYiLCAi5oiQ5YqfIik7CgkJCSAgICAgICAgICAgIH0pOwoJCQkgICAgICAgIH0KCQkJICAgIH0pCgkJCX0sCgkJfQoJfTsK"},{"version":3,"sources":["list_goods.vue"],"names":[],"mappings":";AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list_goods.vue","sourceRoot":"src/components/diy","sourcesContent":["<template>\n\t<div class=\"list_goods list list-x\">\n\t\t<div class=\"goods\" v-for=\"(o, i) in list\" :key=\"i\">\n\t\t\t<router-link :to=\"'/goods/details?' + vm.goods_id + '=' + o[vm.goods_id]\">\n\t\t\t\t<div class=\"media\">\n\t\t\t\t\t<div class=\"icon h-100\">\n\t\t\t\t\t\t<img :src=\"$fullUrl(o[vm.img])\" style=\"width:100%;height:100%\" v-default-img=\"'/img/default.png'\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</router-link>\n\t\t\t<div class=\"doc\">\n\t\t\t\t<router-link :to=\"'/goods/details?' + vm.goods_id + '=' + o[vm.goods_id]\">\n\t\t\t\t\t<div class=\"title\">{{ o[vm.title] }}</div>\n\t\t\t\t</router-link>\n\t\t\t\t<div class=\"bottom\">\n\t\t\t\t\t<span class=\"price\">￥{{ o[vm.price] }}</span>\n\t\t\t\t\t<span class=\"price_ago\">￥{{ o[vm.price_ago] }}</span>\n\t\t\t\t\t<b-icon class=\"icon_cart\" icon=\"cart\"  v-if=\"!o[vm.source_table]||$check_cart_page('/'+o[vm.source_table]+'/list')\" @click=\"add_cart(o)\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\tprops: {\n\t\t\turl: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"/pages/goods/details?goods_id=\",\n\t\t\t},\n\t\t\tlist: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: function() {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t},\n\t\t\tvm: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault: function() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tgoods_id: \"goods_id\",\n\t\t\t\t\t\timg: \"img\",\n\t\t\t\t\t\ttitle: \"title\",\n\t\t\t\t\t\tprice: \"price\",\n\t\t\t\t\t\tprice_ago: \"price_ago\",\n\t\t\t\t\t\tsource_table:\"source_table\"\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuser_id: this.$store.state.user.user_id\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * 添加购物车\n\t\t\t */\n\t\t\tadd_cart(obj) {\n\t\t\t    var {\n\t\t\t        title,\n\t\t\t        img,\n\t\t\t        price,\n\t\t\t        price_ago,\n\t\t\t        num_buy: num,\n\t\t\t        description,\n\t\t\t        goods_id,\n\t\t\t        type,\n\t\t\t    } = obj;\n\t\t\t    var body = {\n\t\t\t        title,\n\t\t\t        img,\n\t\t\t        price,\n\t\t\t        price_ago,\n\t\t\t        num,\n\t\t\t        price_count: price,\n\t\t\t        description,\n\t\t\t        goods_id,\n\t\t\t        type,\n\t\t\t        user_id: this.$store.state.user.user_id,\n\t\t\t    };\n\t\t\t\tbody.num = 1;\n\n\t\t\t    this.$get(\"~/api/cart/get_list?\", {\n\t\t\t        goods_id: obj.goods_id,\n\t\t\t\t\tuser_id: this.$store.state.user.user_id\n\t\t\t    }, (res) => {\n\t\t\t        console.log(res)\n\t\t\t        if (res.result.count) {\n\t\t\t            var {cart_id, num, price, price_count} = res.result.list[0];\n\t\t\t            num += 1;\n\t\t\t            price_count += price;\n\t\t\t            this.$post(\n\t\t\t                `~/api/cart/set?cart_id=${cart_id}`,\n\t\t\t                {\n\t\t\t                    num,\n\t\t\t                    price,\n\t\t\t                    price_count,\n\t\t\t                },\n\t\t\t                (res) => {\n\t\t\t                    this.$toast(\"已加入购物车\", \"成功\");\n\t\t\t                    console.log(\"更改值\")\n\t\t\t                }\n\t\t\t            );\n\t\t\t        } else {\n\t\t\t            this.$post(\"~/api/cart/add?\", body, (res) => {\n\t\t\t                this.$toast(\"已加入购物车\", \"成功\");\n\t\t\t            });\n\t\t\t        }\n\t\t\t    })\n\t\t\t},\n\t\t}\n\t};\n</script>\n\n<style scoped>\n\t.media {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tflex-basis: 75%;\n\t\tmin-height: 10rem;\n\t}\n\n\t.goods {\n\t\tdisplay: flex;\n\t\twidth: calc(25% - 1rem);\n\t\tmargin: 0.5rem;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tbackground-color: white;\n\t\tborder-radius: 0.5rem;\n\t}\n\n\t.goods:hover {\n\t\tborder: 0.2rem solid #909399;\n\t\tbox-shadow: 0 0.1rem 0.3rem rgba(0, 0, 0, 0.15);\n\t}\n\n\t.goods:hover img {\n\t\tfilter: blur(1px);\n\t}\n\n\t.price {\n\t\tfont-size: 1rem;\n\t\tmargin-right: 3px;\n\t}\n\n\t.price_ago {\n\t\ttext-decoration: line-through;\n\t\tfont-size: 0.5rem;\n\t\tcolor: #999;\n\n\t}\n\n\t.title {\n\t\tword-break: break-all;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\tfont-weight: 700;\n\t\tpadding: .25rem .5rem;\n\t}\n\t.bottom {\n\t\tpadding: 0 .5rem .5rem 0.5rem;\n\t}\n\n\t.icon_cart {\n\t\tcolor: #FF5722;\n\t\tfloat: right;\n\t}\n\n\t@media (max-width: 992px) {\n\n\t\t.goods {\n\t\t\twidth: calc(33% - 1rem);\n\t\t\t;\n\t\t}\n\n\t}\n\n\t@media (max-width: 768px) {\n\n\t\t.goods {\n\t\t\twidth: calc(50% - 1rem);\n\t\t\t;\n\t\t}\n\n\t}\n</style>\n"]}]}