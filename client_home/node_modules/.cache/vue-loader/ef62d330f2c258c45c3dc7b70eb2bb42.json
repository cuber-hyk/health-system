{"remainingRequest":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\components\\diy\\list_address.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\components\\diy\\list_address.vue","mtime":1657768166000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglleHBvcnQgZGVmYXVsdCB7CgkJbmFtZTogImxpc3RfYWRkcmVzcyIsCgkJcHJvcHM6IHsKCQkJbGlzdDogewoJCQkJdHlwZTogQXJyYXksCgkJCQlkZWZhdWx0OiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gW3sKCQkJCQkJbmFtZTogIiIsCgkJCQkJCXBob25lOiAiIiwKCQkJCQkJYWRkcmVzczogIiIsCgkJCQkJCXVzZXJfaWQ6IDAsCgkJCQkJCWFkZHJlc3NfaWQ6IDAsCgkJCQkJCWRlZmF1bHQ6IDAsCgkJCQkJCWRpc3BsYXlfYnRuOiAiZGlzcGxheV9idG4iCgkJCQkJfV07CgkJCQl9CgkJCX0sCgkJCXZtOiB7CgkJCQl0eXBlOiBPYmplY3QsCgkJCQlkZWZhdWx0OiBmdW5jdGlvbigpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQluYW1lOiAibmFtZSIsCgkJCQkJCXBob25lOiAicGhvbmUiLAoJCQkJCQlhZGRyZXNzOiAiYWRkcmVzcyIsCgkJCQkJCXVzZXJfaWQ6ICJ1c2VyX2lkIiwKCQkJCQkJYWRkcmVzc19pZDogImFkZHJlc3NfaWQiLAoJCQkJCQlkZWZhdWx0OiAiZGVmYXVsdCIsCgkJCQkJCWRpc3BsYXlfYnRuOiAiZGlzcGxheV9idG4iCgkJCQkJfQoJCQkJfQoJCQl9CgkJfSwKCQlkYXRhKCkgewoJCQlyZXR1cm4ge30KCQl9LAoJCW1ldGhvZHM6IHsKCQkJLy8g6YCJ5oup6buY6K6k5Zyw5Z2ACgkJCWFzeW5jIGNob29zZV9kZWZhdWx0KG9iaixpKSB7CgkJCQl2YXIgX3RoaXMgPSB0aGlzOwoKCQkJCXZhciB1c2VyX2lkID0gb2JqLnVzZXJfaWQ7CgkJCQl2YXIgYWRkcmVzc19pZCA9IG9iai5hZGRyZXNzX2lkOwoKCQkJCXZhciByZXMgPSBhd2FpdCB0aGlzLiRwb3N0KGB+L2FwaS9hZGRyZXNzL3NldD91c2VyX2lkPSR7dXNlcl9pZH1gLCB7CgkJCQkJZGVmYXVsdDogMAoJCQkJfSkKCgkJCQlpZiAocmVzLnJlc3VsdCkgewoJCQkJCXRoaXMubGlzdC5tYXAobyA9PiBvLmRlZmF1bHQgPSAwKTsKCgkJCQkJdGhpcy4kcG9zdChgfi9hcGkvYWRkcmVzcy9zZXQ/dXNlcl9pZD0ke3VzZXJfaWR9JmFkZHJlc3NfaWQ9JHthZGRyZXNzX2lkfWAsIHsKCQkJCQkJZGVmYXVsdDogMQoJCQkJCX0sIChqc29uKSA9PiB7CgkJCQkJCWlmIChqc29uLnJlc3VsdCkgewoJCQkJCQkJX3RoaXMubGlzdFtpXS5kZWZhdWx0ID0gMTsKCQkJCQkJCXRoaXMuJHRvYXN0KCLkv67mlLnpu5jorqTlnLDlnYDmiJDlip/vvIEiKTsKCQkJCQkJfSBlbHNlIGlmIChqc29uLmVycm9yKSB7CgkJCQkJCQljb25zb2xlLmxvZyhqc29uLmVycm9yKTsKCQkJCQkJCXRoaXMuJHRvYXN0KGpzb24uZXJyb3IubWVzc2FnZSk7CgkJCQkJCX0KCQkJCQl9KQoJCQkJfSBlbHNlIGlmIChyZXMuZXJyb3IpIHsKCQkJCQljb25zb2xlLmxvZyhyZXMuZXJyb3IpOwoJCQkJCXRoaXMuJHRvYXN0KGpzb24uZXJyb3IubWVzc2FnZSk7CgkJCQl9CgkJCX0sCgoJCQkvLyDliKDpmaQKCQkJZGVsX2FkZHJlc3Mob2JqLGkpIHsKCQkJCXRoaXMuJGdldCgifi9hcGkvYWRkcmVzcy9kZWwiLCB7CgkJCQkJImFkZHJlc3NfaWQiOiBvYmouYWRkcmVzc19pZAoJCQkJfSwgKHJlcykgPT4gewoJCQkJCWlmIChyZXMucmVzdWx0KSB7CgkJCQkJCXRoaXMubGlzdC5zcGxpY2UoaSwxKTsKCQkJCQkJdGhpcy4kdG9hc3QoIuWIoOmZpOWcsOWdgOaIkOWKn++8gSIpOwoJCQkJCX0gZWxzZSBpZiAocmVzLmVycm9yKSB7CgkJCQkJCWNvbnNvbGUubG9nKHJlcy5lcnJvcikKCQkJCQkJdGhpcy4kdG9hc3QoanNvbi5lcnJvci5tZXNzYWdlKTsKCQkJCQl9CgkJCQl9KQoJCQl9LAoKCQkJLy8g5pu05aSa5bGV56S6CgkJCW1vcmVfc2hvdyhvLGkpIHsKCQkJCW8uZGlzcGxheV9idG4gPSAhby5kaXNwbGF5X2J0bjsKCQkJCXRoaXMuJHNldCh0aGlzLmxpc3QsaSxvKTsKCQkJfQoJCX0KCX0K"},{"version":3,"sources":["list_address.vue"],"names":[],"mappings":";AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list_address.vue","sourceRoot":"src/components/diy","sourcesContent":["<template>\n\t<div class=\"list_address\">\n\t\t<div class=\"address_card\" v-for=\"(o,i) in list\" :key=\"i\">\n\t\t\t<div class=\"address_info\">\n\t\t\t\t<div class=\"address_top\">\n\t\t\t\t\t<div class=\"address_content\">\n\t\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t\t<span>{{o[vm.name]}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tag\">\n\t\t\t\t\t\t\t<span class=\"tag_default\"\n\t\t\t\t\t\t\t\t:class=\"{ 'show': o[vm.default] ,'hide': !o[vm.default] }\">默认</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"phone\">\n\t\t\t\t\t\t\t<span>{{ o[vm.phone] }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"btn_show\">\n\t\t\t\t\t\t<button @click=\"more_show(o,i)\">\n\t\t\t\t\t\t\t{{ o[vm.display_btn] ? \"折叠\" : \"展开\" }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"address_bottom\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{o[vm.address]}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bar_btn\" v-if=\"o[vm.display_btn]\">\n\t\t\t\t<button @click=\"choose_default(o,i)\" v-if=\"$check_action('/address/list','set')\">\n\t\t\t\t\t<span>设为默认</span>\n\t\t\t\t</button>\n\t\t\t\t<button @click=\"del_address(o,i)\" v-if=\"$check_action('/address/list','del')\">\n\t\t\t\t\t<span>删除</span>\n\t\t\t\t</button>\n\t\t\t\t<button @click=\"$router.push('./address_edit?address_id='+o[vm.address_id])\"\n\t\t\t\t\tv-if=\"$check_action('/address/list','set')\">\n\t\t\t\t\t<span>编辑</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"btn_address\" @click=\"$router.push('./address_edit')\" v-if=\"$check_action('/address/list','add')\">+\n\t\t\t新建收货地址\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\tname: \"list_address\",\n\t\tprops: {\n\t\t\tlist: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: function() {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\tname: \"\",\n\t\t\t\t\t\tphone: \"\",\n\t\t\t\t\t\taddress: \"\",\n\t\t\t\t\t\tuser_id: 0,\n\t\t\t\t\t\taddress_id: 0,\n\t\t\t\t\t\tdefault: 0,\n\t\t\t\t\t\tdisplay_btn: \"display_btn\"\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t},\n\t\t\tvm: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault: function() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\tphone: \"phone\",\n\t\t\t\t\t\taddress: \"address\",\n\t\t\t\t\t\tuser_id: \"user_id\",\n\t\t\t\t\t\taddress_id: \"address_id\",\n\t\t\t\t\t\tdefault: \"default\",\n\t\t\t\t\t\tdisplay_btn: \"display_btn\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {}\n\t\t},\n\t\tmethods: {\n\t\t\t// 选择默认地址\n\t\t\tasync choose_default(obj,i) {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar user_id = obj.user_id;\n\t\t\t\tvar address_id = obj.address_id;\n\n\t\t\t\tvar res = await this.$post(`~/api/address/set?user_id=${user_id}`, {\n\t\t\t\t\tdefault: 0\n\t\t\t\t})\n\n\t\t\t\tif (res.result) {\n\t\t\t\t\tthis.list.map(o => o.default = 0);\n\n\t\t\t\t\tthis.$post(`~/api/address/set?user_id=${user_id}&address_id=${address_id}`, {\n\t\t\t\t\t\tdefault: 1\n\t\t\t\t\t}, (json) => {\n\t\t\t\t\t\tif (json.result) {\n\t\t\t\t\t\t\t_this.list[i].default = 1;\n\t\t\t\t\t\t\tthis.$toast(\"修改默认地址成功！\");\n\t\t\t\t\t\t} else if (json.error) {\n\t\t\t\t\t\t\tconsole.log(json.error);\n\t\t\t\t\t\t\tthis.$toast(json.error.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t} else if (res.error) {\n\t\t\t\t\tconsole.log(res.error);\n\t\t\t\t\tthis.$toast(json.error.message);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 删除\n\t\t\tdel_address(obj,i) {\n\t\t\t\tthis.$get(\"~/api/address/del\", {\n\t\t\t\t\t\"address_id\": obj.address_id\n\t\t\t\t}, (res) => {\n\t\t\t\t\tif (res.result) {\n\t\t\t\t\t\tthis.list.splice(i,1);\n\t\t\t\t\t\tthis.$toast(\"删除地址成功！\");\n\t\t\t\t\t} else if (res.error) {\n\t\t\t\t\t\tconsole.log(res.error)\n\t\t\t\t\t\tthis.$toast(json.error.message);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 更多展示\n\t\t\tmore_show(o,i) {\n\t\t\t\to.display_btn = !o.display_btn;\n\t\t\t\tthis.$set(this.list,i,o);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.list_address {}\n\n\t.list_address .address_card {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0.5rem 1rem;\n\t}\n\n\t.list_address .address_info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.list_address .address_top {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\t.list_address .address_bottom {\n\t\theight: 2.5rem;\n\t}\n\n\t.list_address .address_content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.list_address .hide {\n\t\tdisplay: none;\n\t}\n\n\t.list_address .show {\n\t\tdisplay: block;\n\t}\n\n\t.list_address .tag_default {\n\t\tfont-weight: 600;\n\t\tfont-size: 0.75rem;\n\t\tmargin: 1rem;\n\t\tpadding: 0.25rem;\n\t\tcolor: #4CD964;\n\t\tborder: #4CD964 1px solid;\n\t\tborder-radius: 5px;\n\t}\n\n\t.list_address .btn_show {\n\t\tpadding-left: 1rem;\n\t\twidth: 20%;\n\t\tmin-width: 5rem;\n\t}\n\n\t.list_address .btn_show {\n\t\tcolor: #15BAF8;\n\t\tborder-radius: 5px;\n\t}\n\n\t.list_address .bar_btn {\n\t\tmargin-top: .5rem;\n\t\tdisplay: flex;\n\t\tjustify-content: start;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.list_address .bar_btn>button {\n\t\tflex: 1;\n\t\tmin-width: 7rem;\n\t\tborder: #dcdcdc 1px solid;\n\t}\n\n\t.btn_address:hover {\n\t\tcursor: pointer;\n\t}\n\n\t.btn_address {\n\t\tcolor: #fff;\n\t\tfont-size: 0.9rem;\n\t\tbackground-color: #FA4E28;\n\t\theight: 2.2rem;\n\t\tline-height: 2.2rem;\n\t\tborder-radius: 1rem;\n\t\tmargin: 0 auto;\n\t\ttext-align: center;\n\t}\n</style>\n"]}]}