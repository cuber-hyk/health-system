{"remainingRequest":"C:\\Users\\123\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\123\\client_home\\src\\views\\book_information\\details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\123\\client_home\\src\\views\\book_information\\details.vue","mtime":1666697568000},{"path":"C:\\Users\\123\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\123\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\123\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\123\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJaW1wb3J0IGRpdl9ib29rX2luZm9ybWF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9kaXkvZGl2X2Jvb2tfaW5mb3JtYXRpb24udnVlIjsNCglpbXBvcnQgbGlzdF9jb21tZW50IGZyb20gIkAvY29tcG9uZW50cy9kaXkvbGlzdF9jb21tZW50LnZ1ZSI7DQoJaW1wb3J0IGJhcl90aXRsZSBmcm9tICJAL2NvbXBvbmVudHMvZGl5L2Jhcl90aXRsZS52dWUiOw0KCWltcG9ydCBmb3JtX2VkaXRvciBmcm9tICJAL2NvbXBvbmVudHMvZGl5L2Zvcm1fZWRpdG9yLnZ1ZSI7DQoJaW1wb3J0IG1peGluIGZyb20gIkAvbWl4aW5zL3BhZ2UuanMiOw0KCWV4cG9ydCBkZWZhdWx0IHsNCgkJbWl4aW5zOlttaXhpbl0sDQoJCWNvbXBvbmVudHM6ew0KCQkJbGlzdF9jb21tZW50LA0KCQkJYmFyX3RpdGxlLA0KCQkJZm9ybV9lZGl0b3IsDQoJCQlkaXZfYm9va19pbmZvcm1hdGlvbg0KCQl9LA0KCQlkYXRhKCl7DQoJCQlyZXR1cm57DQoJCQkJdXJsX2dldF9vYmo6ICJ+L2FwaS9ib29rX2luZm9ybWF0aW9uL2dldF9vYmo/IiwNCg0KCQkJCWZpZWxkOiAiYm9va19pbmZvcm1hdGlvbl9pZCIsDQoNCgkJCQlvYmo6IHsNCgkJCQkJInByYWlzZV9sZW4iOiAwLA0KCQkJCX0sDQoNCgkJCQlxdWVyeTogew0KCQkJCQkJImJvb2tfbnVtYmVyIjogIiIsDQoJCQkJCQkJImJvb2tfbmFtZSI6ICIiLA0KCQkJCQkJCSJjb3ZlciI6ICIiLA0KCQkJCQkJCSJib29rX2NhdGVnb3J5IjogIiIsDQoJCQkJCQkJInF1YW50aXR5IjogMCwNCgkJCQkJCQkiYXV0aG9yIjogIiIsDQoJCQkJCQkJInByZXNzIjogIiIsDQoJCQkJCQkJImJvb2tfaW50cm9kdWN0aW9uIjogIiIsDQoJCQkJCQkiYm9va19pbmZvcm1hdGlvbl9pZCI6MCwNCgkJCQl9LA0KCQkJCS8vIOeCuei1ng0KCQkJCXByYWlzZTogMCwNCgkJCQkvLyDngrnotZ7nirbmgIENCgkJCQlzdGF0ZV9wcmFpc2U6IGZhbHNlLA0KCQkJCS8vIOaUtuiXj+eKtuaAgQ0KCQkJCXN0YXRlX2NvbGxlY3Q6IGZhbHNlLA0KCQkJCWxpc3RfY29tbWVudDogW10sDQoJCQkJZm9ybV9jb21tZW50OiB7DQoJCQkJCXNvdXJjZV90YWJsZTogImJvb2tfaW5mb3JtYXRpb24iLA0KCQkJCQlzb3VyY2VfZmllbGQ6ICJib29rX2luZm9ybWF0aW9uX2lkIiwNCgkJCQkJc291cmNlX2lkOiAwLA0KCQkJCQlyZXBseV90b19pZDogMCwNCgkJCQl9LA0KCQkJCWNvdW50X3BhZ2VzOiAxLCAvLyDpobXpnaLmlbANCg0KCQkJfQ0KCQl9LA0KCQltZXRob2RzOnsNCgkJCS8qKg0KCQkJICog5re75Yqg6K6/6Zeu6YePDQoJCQkgKi8NCgkJCWFkZF9oaXRzKG9iaikgew0KCQkJCW9ialsiaGl0cyJdID0gb2JqWyJoaXRzIl0gKyAxOw0KCQkJCXZhciBoaXRzID0gb2JqWyJoaXRzIl07DQoJCQkJdGhpcy4kcG9zdCgnfi9hcGkvYm9va19pbmZvcm1hdGlvbi9zZXQ/Ym9va19pbmZvcm1hdGlvbl9pZD0nICsgb2JqWyJib29rX2luZm9ybWF0aW9uX2lkIl0sIHsNCgkJCQkJaGl0cw0KCQkJCX0sIChyZXMpID0+IHsNCgkJCQkJaWYocmVzLnJlc3VsdCl7DQoJCQkJCQljb25zb2xlLmxvZygi5re75Yqg6K6/6Zeu6YeP54q25oCB77yaIiAscmVzLnJlc3VsdCk7DQoJCQkJCQl2YXIgYm9keSA9IHsNCgkJCQkJCQlzb3VyY2VfdGFibGU6ICJib29rX2luZm9ybWF0aW9uIiwNCgkJCQkJCQlzb3VyY2VfZmllbGQ6ICJib29rX2luZm9ybWF0aW9uX2lkIiwNCgkJCQkJCQlzb3VyY2VfaWQ6IHRoaXMub2JqLmJvb2tfaW5mb3JtYXRpb25faWQsDQoJCQkJCQkJdXNlcl9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyX2lkLA0KCQkJCQkJfTsNCgkJCQkJCXRoaXMuJHBvc3QoIn4vYXBpL2hpdHMvYWRkPyIsIGJvZHksIChyZXMpID0+IHsNCgkJCQkJCQljb25zb2xlLmxvZyhyZXMpOw0KCQkJCQkJfSk7DQoJCQkJCX0NCgkJCQkJZWxzZSBpZihyZXMuZXJyb3Ipew0KCQkJCQkJY29uc29sZS5lcnJvcihyZXMuZXJyb3IpOw0KCQkJCQl9DQoJCQkJfSk7DQoJCQl9LA0KCQkJZ2V0X29ial9hZnRlcihqc29uKSB7DQoJCQkJLy8g5Yik5pat5piv5ZCm6I635Y+W5Yiw5pWw5o2uDQoJCQkJaWYgKGpzb24gJiYganNvbi5yZXN1bHQgJiYganNvbi5yZXN1bHQub2JqKSB7DQoJCQkJCWNvbnNvbGUubG9nKGpzb24ucmVzdWx0Lm9iaikNCgkJCQkJdmFyIG9iaiA9IGpzb24ucmVzdWx0Lm9iajsNCgkJCQkJdGhpcy5vYmogPSBvYmoNCgkJCQkJLy8g5aKe5Yqg54K55Ye75pWwDQoJCQkJCXRoaXMuYWRkX2hpdHMob2JqKTsNCgkJCQkJLy8g6I635Y+W54K56LWe5pWwDQoJCQkJCXRoaXMuZ2V0X3ByYWlzZShvYmopOw0KCQkJCQkvLyDliJ3lp4vljJbmlLbol4/nirbmgIENCgkJCQkJdGhpcy5nZXRfY29sbGVjdChvYmopOw0KCQkJCQl0aGlzLmdldF9jb21tZW50KG9iaik7DQoJCQkJCXRoaXMuZm9ybV9jb21tZW50LnNvdXJjZV9pZCA9IHRoaXMub2JqLmJvb2tfaW5mb3JtYXRpb25faWQ7DQoJCQkJfQ0KCQkJfSwNCgkJCS8qKg0KCQkJICog5Yid5aeL5YyW5pS26JeP54q25oCBDQoJCQkgKiBAcGFyYW0ge09iamVjdH0gb2JqDQoJCQkgKi8NCgkJCWdldF9jb2xsZWN0KG9iaikgew0KCQkJCXZhciB1c2VyX2lkID0gdGhpcy51c2VyLnVzZXJfaWQ7DQoNCgkJCQl2YXIgcXVlcnkgPSB7DQoJCQkJCXNvdXJjZV90YWJsZTogImJvb2tfaW5mb3JtYXRpb24iLA0KCQkJCQlzb3VyY2VfZmllbGQ6ICJib29rX2luZm9ybWF0aW9uX2lkIiwNCgkJCQkJc291cmNlX2lkOiBvYmpbImJvb2tfaW5mb3JtYXRpb25faWQiXSwNCgkJCQkJdXNlcl9pZA0KCQkJCX07DQoNCgkJCQl0aGlzLiRnZXQoJ34vYXBpL2NvbGxlY3QvY291bnQ/JywgcXVlcnksIChyZXMpID0+IHsNCgkJCQkJY29uc29sZS5sb2cocmVzKTsNCgkJCQkJaWYgKHJlcy5yZXN1bHQgfHwgcmVzLnJlc3VsdCA9PT0gMCkgew0KCQkJCQkJdmFyIGJsID0gcmVzLnJlc3VsdCA/IHRydWUgOiBmYWxzZTsNCgkJCQkJCXRoaXMuc3RhdGVfY29sbGVjdCA9IGJsOw0KCQkJCQkJY29uc29sZS5sb2coIuaUtuiXj+eKtuaAge+8miIgKyBibCk7DQoJCQkJCX0NCgkJCQkJZWxzZSBpZihyZXMuZXJyb3IpIHsNCgkJCQkJCWNvbnNvbGUuZXJyb3IocmVzLmVycm9yKTsNCgkJCQkJfQ0KCQkJCX0pOw0KCQkJfSwNCgkJIC8qKioqDQoJCQkgKiDliIbkuqvngrnlh7sNCgkJCSAqDQoJCQkgKiAgKi8NCgkJCXRvU2hhcmUoZSl7DQoJCQkJd2luZG93Lm9wZW4oZSk7DQoJCQl9LA0KCQkJLyoqDQoJCQkgKiDmlLnlj5jmlLbol4/nirbmgIENCgkJCSAqLw0KCQkJY2hhbmdlX2NvbGxlY3QoKSB7DQoJCQkJdmFyIHVzZXJfaWQgPSB0aGlzLnVzZXIudXNlcl9pZDsNCg0KCQkJCXZhciBxdWVyeSA9IHsNCgkJCQkJc291cmNlX3RhYmxlOiAiYm9va19pbmZvcm1hdGlvbiIsDQoJCQkJCXNvdXJjZV9maWVsZDogImJvb2tfaW5mb3JtYXRpb25faWQiLA0KCQkJCQlzb3VyY2VfaWQ6IHRoaXMub2JqWyJib29rX2luZm9ybWF0aW9uX2lkIl0sDQoJCQkJCXVzZXJfaWQNCgkJCQl9Ow0KDQoJCQkJLy8g5pS26JeP54q25oCBDQoJCQkJaWYgKHRoaXMuc3RhdGVfY29sbGVjdCkgew0KCQkJCQl0aGlzLnN0YXRlX2NvbGxlY3QgPSBmYWxzZTsNCgkJCQkJdGhpcy4kZ2V0KCd+L2FwaS9jb2xsZWN0L2RlbD8nLCBxdWVyeSwgKHJlcykgPT4gew0KCQkJCQkJaWYocmVzLnJlc3VsdCl7DQoJCQkJCQkJdGhpcy4kdG9hc3QoIuWPlua2iOaUtuiXjyIpOw0KCQkJCQkJfQ0KCQkJCQkJZWxzZSBpZiAocmVzLmVycm9yKXsNCgkJCQkJCQl0aGlzLiR0b2FzdChyZXMuZXJyb3IubWVzc2FnZSk7DQoJCQkJCQkJY29uc29sZS5lcnJvcihyZXMuZXJyb3IpOw0KCQkJCQkJfQ0KCQkJCQl9KTsNCgkJCQl9IGVsc2Ugew0KCQkJCQl0aGlzLnN0YXRlX2NvbGxlY3QgPSB0cnVlOw0KCQkJCQkJCQkJCQkJCXF1ZXJ5LnRpdGxlID0gdGhpcy5vYmouYm9va19uYW1lDQoJCQkJCS8qWy9pZl0qLw0KCQkJCQkJCQkJCQkJCQlxdWVyeS5pbWcgPSB0aGlzLm9iai5jb3Zlcg0KCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJdGhpcy4kcG9zdCgnfi9hcGkvY29sbGVjdC9hZGQ/JywgcXVlcnksIChyZXMpID0+IHsNCgkJCQkJCWlmIChyZXMucmVzdWx0KSB7DQoJCQkJCQkJdGhpcy4kdG9hc3QoIuaUtuiXj+aIkOWKnyIpOw0KCQkJCQkJfQ0KCQkJCQkJZWxzZSBpZiAocmVzLmVycm9yKSB7DQoJCQkJCQkJdGhpcy4kdG9hc3QocmVzLmVycm9yLm1lc3NhZ2UpOw0KCQkJCQkJCWNvbnNvbGUuZXJyb3IocmVzLmVycm9yKTsNCgkJCQkJCX0NCgkJCQkJfSk7DQoJCQkJfTsNCgkJCX0sDQoJCQkvKioNCgkJCSAqIOiOt+WPlueCuei1ng0KCQkJICogQHBhcmFtIHtPYmplY3R9IG9iag0KCQkJICovDQoJCQlnZXRfcHJhaXNlKG9iaikgew0KCQkJCXZhciB1c2VyX2lkID0gdGhpcy51c2VyLnVzZXJfaWQ7DQoNCgkJCQl0aGlzLiRnZXQoIn4vYXBpL3ByYWlzZS9jb3VudD8iLCB7DQoJCQkJCXNvdXJjZV90YWJsZTogImJvb2tfaW5mb3JtYXRpb24iLA0KCQkJCQlzb3VyY2VfZmllbGQ6ICJib29rX2luZm9ybWF0aW9uX2lkIiwNCgkJCQkJc291cmNlX2lkOiBvYmpbImJvb2tfaW5mb3JtYXRpb25faWQiXQ0KCQkJCX0sIChyZXMpID0+IHsNCgkJCQkJaWYgKHJlcy5yZXN1bHQgfHwgcmVzLnJlc3VsdCA9PT0gMCkgew0KCQkJCQkJdGhpcy5wcmFpc2UgPSByZXMucmVzdWx0Ow0KCQkJCQkJY29uc29sZS5sb2coIueCuei1nuaVsO+8miIgLHJlcy5yZXN1bHQpOw0KCQkJCQl9DQoJCQkJCWVsc2UgaWYgKHJlcy5lcnJvcil7DQoJCQkJCQl0aGlzLiR0b2FzdChyZXMuZXJyb3IubWVzc2FnZSk7DQoJCQkJCQljb25zb2xlLmVycm9yKHJlcy5lcnJvcik7DQoJCQkJCX0NCgkJCQl9KTsNCg0KCQkJCXRoaXMuJGdldCgifi9hcGkvcHJhaXNlL2NvdW50PyIsIHsNCgkJCQkJc291cmNlX3RhYmxlOiAiYm9va19pbmZvcm1hdGlvbiIsDQoJCQkJCXNvdXJjZV9maWVsZDogImJvb2tfaW5mb3JtYXRpb25faWQiLA0KCQkJCQlzb3VyY2VfaWQ6IG9ialsiYm9va19pbmZvcm1hdGlvbl9pZCJdLA0KCQkJCQl1c2VyX2lkDQoJCQkJfSwgKHJlcykgPT4gew0KCQkJCQlpZiAocmVzLnJlc3VsdCB8fCByZXMucmVzdWx0ID09PSAwKSB7DQoJCQkJCQl0aGlzLnN0YXRlX3ByYWlzZSA9IHJlcy5yZXN1bHQgPyB0cnVlIDogZmFsc2U7DQoJCQkJCQljb25zb2xlLmxvZygi54K56LWe54q25oCB77yaIiAscmVzLnJlc3VsdCk7DQoJCQkJCX0NCgkJCQkJZWxzZSBpZiAocmVzLmVycm9yKXsNCgkJCQkJCXRoaXMuJHRvYXN0KHJlcy5lcnJvci5tZXNzYWdlKTsNCgkJCQkJCWNvbnNvbGUuZXJyb3IocmVzLmVycm9yKTsNCgkJCQkJfQ0KCQkJCX0pDQoJCQl9LA0KDQoJCQkvKioNCgkJCSAqIOaUueWPmOeCuei1nuaVsA0KCQkJICovDQoJCQljaGFuZ2VfcHJhaXNlKG9iaikgew0KCQkJCXZhciB1c2VyX2lkID0gdGhpcy51c2VyLnVzZXJfaWQ7DQoNCgkJCQl2YXIgcXVlcnkgPSB7DQoJCQkJCXNvdXJjZV90YWJsZTogImJvb2tfaW5mb3JtYXRpb24iLA0KCQkJCQlzb3VyY2VfZmllbGQ6ICJib29rX2luZm9ybWF0aW9uX2lkIiwNCgkJCQkJc291cmNlX2lkOiB0aGlzLm9ialsiYm9va19pbmZvcm1hdGlvbl9pZCJdLA0KCQkJCQl1c2VyX2lkDQoJCQkJfTsNCg0KCQkJCXZhciBfdGhpcyA9IHRoaXM7DQogICAgICAgIF90aGlzLm9iai5wcmFpc2VfbGVuID0gcGFyc2VJbnQoX3RoaXMub2JqLnByYWlzZV9sZW4pDQoJCQkJLy8g54K56LWe54q25oCBDQoJCQkJaWYgKHRoaXMuc3RhdGVfcHJhaXNlKSB7DQoJCQkJCXRoaXMuc3RhdGVfcHJhaXNlID0gZmFsc2U7DQoJCQkJCXRoaXMuJGdldCgnfi9hcGkvcHJhaXNlL2RlbD8nLCBxdWVyeSwgKHJlcykgPT4gew0KCQkJCQkJaWYocmVzLnJlc3VsdCl7DQoJCQkJCQkJdmFyIHByYWlzZV9sZW4gPSBfdGhpcy5vYmoucHJhaXNlX2xlbi0xDQoJCQkJCQkJdGhpcy4kcG9zdCgnfi9hcGkvYm9va19pbmZvcm1hdGlvbi9zZXQ/Ym9va19pbmZvcm1hdGlvbl9pZD0nICsgX3RoaXMub2JqWyJib29rX2luZm9ybWF0aW9uX2lkIl0sIHsNCgkJCQkJCQkJcHJhaXNlX2xlbg0KCQkJCQkJCX0sIChyZXMpID0+IHsNCgkJCQkJCQkJaWYocmVzLnJlc3VsdCl7DQoJCQkJCQkJCQljb25zb2xlLmxvZygi5re75Yqg54K56LWe5pWw54q25oCB77yaIiAscmVzLnJlc3VsdCk7DQoJCQkJCQkJCX0NCgkJCQkJCQkJZWxzZSBpZihyZXMuZXJyb3Ipew0KCQkJCQkJCQkJY29uc29sZS5lcnJvcihyZXMuZXJyb3IpOw0KCQkJCQkJCQl9DQoJCQkJCQkJfSk7DQoJCQkJCQkJdGhpcy4kdG9hc3QoIuWPlua2iOeCuei1niIpOw0KCQkJCQkJfQ0KCQkJCQkJZWxzZSBpZiAocmVzLmVycm9yKXsNCgkJCQkJCQl0aGlzLiR0b2FzdChyZXMuZXJyb3IubWVzc2FnZSk7DQoJCQkJCQkJY29uc29sZS5lcnJvcihyZXMuZXJyb3IpOw0KCQkJCQkJfQ0KCQkJCQl9KTsNCgkJCQl9IGVsc2Ugew0KCQkJCQl0aGlzLnN0YXRlX3ByYWlzZSA9IHRydWU7DQoJCQkJCXRoaXMuJHBvc3QoJ34vYXBpL3ByYWlzZS9hZGQ/JywgcXVlcnksIChyZXMpID0+IHsNCgkJCQkJCWlmIChyZXMucmVzdWx0KSB7DQoJCQkJCQkJdmFyIHByYWlzZV9sZW4gPSBfdGhpcy5vYmoucHJhaXNlX2xlbisxDQoJCQkJCQkJdGhpcy4kcG9zdCgnfi9hcGkvYm9va19pbmZvcm1hdGlvbi9zZXQ/Ym9va19pbmZvcm1hdGlvbl9pZD0nICsgX3RoaXMub2JqWyJib29rX2luZm9ybWF0aW9uX2lkIl0sIHsNCgkJCQkJCQkJcHJhaXNlX2xlbg0KCQkJCQkJCX0sIChyZXMpID0+IHsNCgkJCQkJCQkJaWYocmVzLnJlc3VsdCl7DQoJCQkJCQkJCQljb25zb2xlLmxvZygi5re75Yqg54K56LWe5pWw54q25oCB77yaIiAscmVzLnJlc3VsdCk7DQoJCQkJCQkJCX0NCgkJCQkJCQkJZWxzZSBpZihyZXMuZXJyb3Ipew0KCQkJCQkJCQkJY29uc29sZS5lcnJvcihyZXMuZXJyb3IpOw0KCQkJCQkJCQl9DQoJCQkJCQkJfSk7DQoJCQkJCQkJdGhpcy4kdG9hc3QoIueCuei1nuaIkOWKnyIpOw0KCQkJCQkJfQ0KCQkJCQkJZWxzZSBpZiAocmVzLmVycm9yKSB7DQoJCQkJCQkJdGhpcy4kdG9hc3QocmVzLmVycm9yLm1lc3NhZ2UpOw0KCQkJCQkJCWNvbnNvbGUuZXJyb3IocmVzLmVycm9yKTsNCgkJCQkJCX0NCgkJCQkJfSk7DQoJCQkJfTsNCgkJCX0sDQoJCQkvKioNCgkJCSAqIOWIhumhteWZqA0KCQkJICogQHBhcmFtIHsgTnVtYmVyIH0gcGFnZV9udW0g5YiG6aG15pWwDQoJCQkgKiBAcmV0dXJuIHsgT2JqZWN0IH0g5p+l6K+i5a+56LGhDQoJCQkgKi8NCgkJCWxpbmtfZ2VuKHBhZ2VfbnVtKSB7DQoJCQkJcmV0dXJuIHsNCgkJCQkJcXVlcnk6IHRoaXMucXVlcnksDQoJCQkJfTsNCgkJCX0sDQoJCQkvKioNCgkJCSAq5Yqg6L295LiL5LiA6aG1DQoJCQkgKi8NCgkJCWNoYW5nZV9wYWdlKHBhZ2VfbnVtKSB7DQoJCQkJdGhpcy5nZXRfY29tbWVudCh0aGlzLm9iaiwgcGFnZV9udW0pOw0KCQkJCXRoaXMuZm9ybV9jb21tZW50LnJlcGx5X3RvX2lkID0gMDsNCgkJCX0sDQoJCQkvKioNCgkJCSAqIOabtOaWsOivhOiuug0KCQkJICovDQoJCQl1cGRhdGVfY29tbWVudCgpIHsNCgkJCQl0aGlzLmdldF9jb21tZW50KHRoaXMub2JqKTsNCgkJCX0sDQoJCQkvKioNCgkJCSAqIOiOt+WPluivhOiuug0KCQkJICogQHBhcmFtIHsgT2JqZWN0IH0gb2JqIOaWh+eroOWvueixoQ0KCQkJICogQHBhcmFtIHsgTnVtYmVyIH0gcGFnZSDliIbpobXmlbANCgkJCSAqIEBwYXJhbSB7IE51bWJlciB9IHNpemUg6K+E6K665pi+56S65p2h5pWwDQoJCQkgKi8NCgkJCWdldF9jb21tZW50KG9iaiwgcGFnZSA9IDEsIHNpemUgPSA1KSB7DQoJCQkJdGhpcy4kZ2V0KA0KCQkJCQkJIn4vYXBpL2NvbW1lbnQvZ2V0X2xpc3Q/IiwNCgkJCQkJCXsNCgkJCQkJCQlzb3VyY2VfdGFibGU6ICJib29rX2luZm9ybWF0aW9uIiwNCgkJCQkJCQlzb3VyY2VfZmllbGQ6ICJib29rX2luZm9ybWF0aW9uX2lkIiwNCgkJCQkJCQlzb3VyY2VfaWQ6IHRoaXMub2JqWyJib29rX2luZm9ybWF0aW9uX2lkIl0sDQoJCQkJCQkJcGFnZSwNCgkJCQkJCQlzaXplLA0KCQkJCQkJCXJlcGx5X3RvX2lkOiAiMCIsDQoJCQkJCQkJb3JkZXJieTogImNyZWF0ZV90aW1lIGRlc2MiLA0KCQkJCQkJfSwNCgkJCQkJCShqc29uKSA9PiB7DQoJCQkJCQkJaWYgKGpzb24ucmVzdWx0KSB7DQoJCQkJCQkJCXZhciBsaXN0X2NvbW1lbnQgPSBqc29uLnJlc3VsdC5saXN0Ow0KCQkJCQkJCQlsaXN0X2NvbW1lbnQubWFwKChvKSA9PiB7DQoJCQkJCQkJCQlvLmxpc3RfcmVwbHkgPSBbXTsNCgkJCQkJCQkJfSk7DQoJCQkJCQkJCXRoaXMuYWRkX3JlcGx5KGxpc3RfY29tbWVudCkudGhlbigobGlzdCkgPT4gew0KCQkJCQkJCQkJdGhpcy5saXN0X2NvbW1lbnQgPSBsaXN0Ow0KCQkJCQkJCQl9KTsNCgkJCQkJCQkJdGhpcy5jb3VudF9wYWdlcyA9IE1hdGguY2VpbChqc29uLnJlc3VsdC5jb3VudCAvIHNpemUpIHx8IDENCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJKTsNCgkJCX0sDQoJCQkvKioNCgkJCSAqIEBwYXJhbSB7IEFycmF5IH0gbGlzdCDor4TorrrliJfooagNCgkJCSAqIOa3u+WKoOWbnuWkjeWIsOivhOiuuuWIl+ihqA0KCQkJICovDQoJCQlhZGRfcmVwbHkobGlzdCkgew0KCQkJCXJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gew0KCQkJCQlmb3IgKGxldCBpZHggPSAwOyBpZHggPCBsaXN0Lmxlbmd0aDsgaWR4KyspIHsNCgkJCQkJCWNvbnN0IG9iaiA9IGxpc3RbaWR4XTsNCgkJCQkJCXRoaXMuJGdldCgNCgkJCQkJCQkJIn4vYXBpL2NvbW1lbnQvZ2V0X2xpc3Q/IiwNCgkJCQkJCQkJew0KCQkJCQkJCQkJc291cmNlX3RhYmxlOiAiYm9va19pbmZvcm1hdGlvbiIsDQoJCQkJCQkJCQlzb3VyY2VfZmllbGQ6ICJib29rX2luZm9ybWF0aW9uX2lkIiwNCgkJCQkJCQkJCXNvdXJjZV9pZDogdGhpcy5vYmpbImJvb2tfaW5mb3JtYXRpb25faWQiXSwNCgkJCQkJCQkJCW9yZGVyYnk6ICJjcmVhdGVfdGltZSBkZXNjIiwNCgkJCQkJCQkJCXJlcGx5X3RvX2lkOiBvYmouY29tbWVudF9pZCwNCgkJCQkJCQkJfSwNCgkJCQkJCQkJKHJlcykgPT4gew0KCQkJCQkJCQkJaWYgKHJlcy5yZXN1bHQpIHsNCgkJCQkJCQkJCQlvYmoubGlzdF9yZXBseSA9IHJlcy5yZXN1bHQubGlzdDsNCgkJCQkJCQkJCX0NCgkJCQkJCQkJfQ0KCQkJCQkJKTsNCgkJCQkJfQ0KCQkJCQlyZXNvbHZlKGxpc3QpOw0KCQkJCX0pOw0KCQkJfSwNCg0KDQoJCX0sDQoJCWNvbXB1dGVkOiB7DQoJCQlyZXNwb25kZW50KCkgew0KCQkJCXZhciByZXBseV90b19pZCA9IHRoaXMuZm9ybV9jb21tZW50LnJlcGx5X3RvX2lkOw0KCQkJCXZhciByZXNwb25kZW50ID0gIiI7DQoJCQkJdGhpcy5saXN0X2NvbW1lbnQubWFwKChvKSA9PiB7DQoJCQkJCWlmIChvLmNvbW1lbnRfaWQgPT09IHJlcGx5X3RvX2lkKSB7DQoJCQkJCQlyZXNwb25kZW50ID0gby5uaWNrbmFtZTsNCgkJCQkJfQ0KCQkJCX0pOw0KCQkJCXJldHVybiByZXNwb25kZW50Ow0KCQkJfSwNCgkJfSwNCg0KCQltb3VudGVkKCkgew0KDQoJCX0sDQoNCgl9DQo="},{"version":3,"sources":["details.vue"],"names":[],"mappings":";AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA","file":"details.vue","sourceRoot":"src/views/book_information","sourcesContent":["<template>\r\n\t<div class=\"diy_details page_book_information\" id=\"book_information_details\">\r\n\t\t<div class='warp'>\r\n\t\t\t<div class='container'>\r\n\t\t\t\t<div class='row'>\r\n\t\t\t\t\t<div class='col'>\r\n\t\t\t\t\t\t<div class='card_book_information'>\r\n\t\t\t\t\t\t\t<div_book_information :obj=\"obj\"></div_book_information>\r\n\r\n\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 评论区 -->\r\n\t\t<div class=\"warp\" v-if=\"$check_action('/comment/list', 'get')\">\r\n\t\t\t<div class=\"container\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<!-- 评论区 -->\r\n\t\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t\t<bar_title class=\"mt\" title=\"评论区\"\tv-if=\"list_comment.length\"/>\r\n\t\t\t\t\t\t<div class=\"comment_box\"\tv-if=\"list_comment.length\">\r\n\t\t\t\t\t\t\t<list_comment\r\n\t\t\t\t\t\t\t\t\tclass=\"w-100\"\r\n\t\t\t\t\t\t\t\t\t:list=\"list_comment\"\r\n\t\t\t\t\t\t\t\t\t:obj=\"form_comment\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<b-pagination-nav\r\n\t\t\t\t\t\t\t\t\t:base-url=\"$route.path\"\r\n\t\t\t\t\t\t\t\t\t:number-of-pages=\"count_pages\"\r\n\t\t\t\t\t\t\t\t\t:link-gen=\"link_gen\"\r\n\t\t\t\t\t\t\t\t\t@change=\"change_page\"\r\n\t\t\t\t\t\t\t\t\tfirst-number\r\n\t\t\t\t\t\t\t\t\tlast-number\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<!-- 发表评论 -->\r\n\t\t\t\t\t\t<div class=\"form_editor form_edit_box\">\r\n\t\t\t\t\t\t\t<div class=\"details_form_editor_title\">发表评论</div>\r\n\t\t\t\t\t\t\t<div class=\"fl ml-3 answer_title\" v-show=\"form_comment.reply_to_id\">\r\n\t\t\t\t\t\t\t\t对 <i>{{ respondent }}</i> 回复:\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"fr mr-3\" v-show=\"form_comment.reply_to_id\">\r\n\t\t\t\t\t\t\t\t<b-button\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outline-primary reset_answer_personnel\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"form_comment.reply_to_id = 0\"\r\n\t\t\t\t\t\t\t\t>重置回复人\r\n\t\t\t\t\t\t\t\t</b-button\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<form_editor\r\n\t\t\t\t\t\t\t\t\tclass=\"fn\"\r\n\t\t\t\t\t\t\t\t\t:form=\"form_comment\"\r\n\t\t\t\t\t\t\t\t\t@update_comment=\"update_comment\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport div_book_information from \"@/components/diy/div_book_information.vue\";\r\n\timport list_comment from \"@/components/diy/list_comment.vue\";\r\n\timport bar_title from \"@/components/diy/bar_title.vue\";\r\n\timport form_editor from \"@/components/diy/form_editor.vue\";\r\n\timport mixin from \"@/mixins/page.js\";\r\n\texport default {\r\n\t\tmixins:[mixin],\r\n\t\tcomponents:{\r\n\t\t\tlist_comment,\r\n\t\t\tbar_title,\r\n\t\t\tform_editor,\r\n\t\t\tdiv_book_information\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\turl_get_obj: \"~/api/book_information/get_obj?\",\r\n\r\n\t\t\t\tfield: \"book_information_id\",\r\n\r\n\t\t\t\tobj: {\r\n\t\t\t\t\t\"praise_len\": 0,\r\n\t\t\t\t},\r\n\r\n\t\t\t\tquery: {\r\n\t\t\t\t\t\t\"book_number\": \"\",\r\n\t\t\t\t\t\t\t\"book_name\": \"\",\r\n\t\t\t\t\t\t\t\"cover\": \"\",\r\n\t\t\t\t\t\t\t\"book_category\": \"\",\r\n\t\t\t\t\t\t\t\"quantity\": 0,\r\n\t\t\t\t\t\t\t\"author\": \"\",\r\n\t\t\t\t\t\t\t\"press\": \"\",\r\n\t\t\t\t\t\t\t\"book_introduction\": \"\",\r\n\t\t\t\t\t\t\"book_information_id\":0,\r\n\t\t\t\t},\r\n\t\t\t\t// 点赞\r\n\t\t\t\tpraise: 0,\r\n\t\t\t\t// 点赞状态\r\n\t\t\t\tstate_praise: false,\r\n\t\t\t\t// 收藏状态\r\n\t\t\t\tstate_collect: false,\r\n\t\t\t\tlist_comment: [],\r\n\t\t\t\tform_comment: {\r\n\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\tsource_id: 0,\r\n\t\t\t\t\treply_to_id: 0,\r\n\t\t\t\t},\r\n\t\t\t\tcount_pages: 1, // 页面数\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t/**\r\n\t\t\t * 添加访问量\r\n\t\t\t */\r\n\t\t\tadd_hits(obj) {\r\n\t\t\t\tobj[\"hits\"] = obj[\"hits\"] + 1;\r\n\t\t\t\tvar hits = obj[\"hits\"];\r\n\t\t\t\tthis.$post('~/api/book_information/set?book_information_id=' + obj[\"book_information_id\"], {\r\n\t\t\t\t\thits\r\n\t\t\t\t}, (res) => {\r\n\t\t\t\t\tif(res.result){\r\n\t\t\t\t\t\tconsole.log(\"添加访问量状态：\" ,res.result);\r\n\t\t\t\t\t\tvar body = {\r\n\t\t\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\t\t\tsource_id: this.obj.book_information_id,\r\n\t\t\t\t\t\t\tuser_id: this.$store.state.user.user_id,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.$post(\"~/api/hits/add?\", body, (res) => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(res.error){\r\n\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tget_obj_after(json) {\r\n\t\t\t\t// 判断是否获取到数据\r\n\t\t\t\tif (json && json.result && json.result.obj) {\r\n\t\t\t\t\tconsole.log(json.result.obj)\r\n\t\t\t\t\tvar obj = json.result.obj;\r\n\t\t\t\t\tthis.obj = obj\r\n\t\t\t\t\t// 增加点击数\r\n\t\t\t\t\tthis.add_hits(obj);\r\n\t\t\t\t\t// 获取点赞数\r\n\t\t\t\t\tthis.get_praise(obj);\r\n\t\t\t\t\t// 初始化收藏状态\r\n\t\t\t\t\tthis.get_collect(obj);\r\n\t\t\t\t\tthis.get_comment(obj);\r\n\t\t\t\t\tthis.form_comment.source_id = this.obj.book_information_id;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 初始化收藏状态\r\n\t\t\t * @param {Object} obj\r\n\t\t\t */\r\n\t\t\tget_collect(obj) {\r\n\t\t\t\tvar user_id = this.user.user_id;\r\n\r\n\t\t\t\tvar query = {\r\n\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\tsource_id: obj[\"book_information_id\"],\r\n\t\t\t\t\tuser_id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.$get('~/api/collect/count?', query, (res) => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif (res.result || res.result === 0) {\r\n\t\t\t\t\t\tvar bl = res.result ? true : false;\r\n\t\t\t\t\t\tthis.state_collect = bl;\r\n\t\t\t\t\t\tconsole.log(\"收藏状态：\" + bl);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(res.error) {\r\n\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t /****\r\n\t\t\t * 分享点击\r\n\t\t\t *\r\n\t\t\t *  */\r\n\t\t\ttoShare(e){\r\n\t\t\t\twindow.open(e);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 改变收藏状态\r\n\t\t\t */\r\n\t\t\tchange_collect() {\r\n\t\t\t\tvar user_id = this.user.user_id;\r\n\r\n\t\t\t\tvar query = {\r\n\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\tsource_id: this.obj[\"book_information_id\"],\r\n\t\t\t\t\tuser_id\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 收藏状态\r\n\t\t\t\tif (this.state_collect) {\r\n\t\t\t\t\tthis.state_collect = false;\r\n\t\t\t\t\tthis.$get('~/api/collect/del?', query, (res) => {\r\n\t\t\t\t\t\tif(res.result){\r\n\t\t\t\t\t\t\tthis.$toast(\"取消收藏\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (res.error){\r\n\t\t\t\t\t\t\tthis.$toast(res.error.message);\r\n\t\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state_collect = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tquery.title = this.obj.book_name\r\n\t\t\t\t\t/*[/if]*/\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tquery.img = this.obj.cover\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$post('~/api/collect/add?', query, (res) => {\r\n\t\t\t\t\t\tif (res.result) {\r\n\t\t\t\t\t\t\tthis.$toast(\"收藏成功\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (res.error) {\r\n\t\t\t\t\t\t\tthis.$toast(res.error.message);\r\n\t\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 获取点赞\r\n\t\t\t * @param {Object} obj\r\n\t\t\t */\r\n\t\t\tget_praise(obj) {\r\n\t\t\t\tvar user_id = this.user.user_id;\r\n\r\n\t\t\t\tthis.$get(\"~/api/praise/count?\", {\r\n\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\tsource_id: obj[\"book_information_id\"]\r\n\t\t\t\t}, (res) => {\r\n\t\t\t\t\tif (res.result || res.result === 0) {\r\n\t\t\t\t\t\tthis.praise = res.result;\r\n\t\t\t\t\t\tconsole.log(\"点赞数：\" ,res.result);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (res.error){\r\n\t\t\t\t\t\tthis.$toast(res.error.message);\r\n\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.$get(\"~/api/praise/count?\", {\r\n\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\tsource_id: obj[\"book_information_id\"],\r\n\t\t\t\t\tuser_id\r\n\t\t\t\t}, (res) => {\r\n\t\t\t\t\tif (res.result || res.result === 0) {\r\n\t\t\t\t\t\tthis.state_praise = res.result ? true : false;\r\n\t\t\t\t\t\tconsole.log(\"点赞状态：\" ,res.result);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (res.error){\r\n\t\t\t\t\t\tthis.$toast(res.error.message);\r\n\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 改变点赞数\r\n\t\t\t */\r\n\t\t\tchange_praise(obj) {\r\n\t\t\t\tvar user_id = this.user.user_id;\r\n\r\n\t\t\t\tvar query = {\r\n\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\tsource_id: this.obj[\"book_information_id\"],\r\n\t\t\t\t\tuser_id\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar _this = this;\r\n        _this.obj.praise_len = parseInt(_this.obj.praise_len)\r\n\t\t\t\t// 点赞状态\r\n\t\t\t\tif (this.state_praise) {\r\n\t\t\t\t\tthis.state_praise = false;\r\n\t\t\t\t\tthis.$get('~/api/praise/del?', query, (res) => {\r\n\t\t\t\t\t\tif(res.result){\r\n\t\t\t\t\t\t\tvar praise_len = _this.obj.praise_len-1\r\n\t\t\t\t\t\t\tthis.$post('~/api/book_information/set?book_information_id=' + _this.obj[\"book_information_id\"], {\r\n\t\t\t\t\t\t\t\tpraise_len\r\n\t\t\t\t\t\t\t}, (res) => {\r\n\t\t\t\t\t\t\t\tif(res.result){\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"添加点赞数状态：\" ,res.result);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if(res.error){\r\n\t\t\t\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.$toast(\"取消点赞\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (res.error){\r\n\t\t\t\t\t\t\tthis.$toast(res.error.message);\r\n\t\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state_praise = true;\r\n\t\t\t\t\tthis.$post('~/api/praise/add?', query, (res) => {\r\n\t\t\t\t\t\tif (res.result) {\r\n\t\t\t\t\t\t\tvar praise_len = _this.obj.praise_len+1\r\n\t\t\t\t\t\t\tthis.$post('~/api/book_information/set?book_information_id=' + _this.obj[\"book_information_id\"], {\r\n\t\t\t\t\t\t\t\tpraise_len\r\n\t\t\t\t\t\t\t}, (res) => {\r\n\t\t\t\t\t\t\t\tif(res.result){\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"添加点赞数状态：\" ,res.result);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if(res.error){\r\n\t\t\t\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.$toast(\"点赞成功\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (res.error) {\r\n\t\t\t\t\t\t\tthis.$toast(res.error.message);\r\n\t\t\t\t\t\t\tconsole.error(res.error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 分页器\r\n\t\t\t * @param { Number } page_num 分页数\r\n\t\t\t * @return { Object } 查询对象\r\n\t\t\t */\r\n\t\t\tlink_gen(page_num) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tquery: this.query,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t *加载下一页\r\n\t\t\t */\r\n\t\t\tchange_page(page_num) {\r\n\t\t\t\tthis.get_comment(this.obj, page_num);\r\n\t\t\t\tthis.form_comment.reply_to_id = 0;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 更新评论\r\n\t\t\t */\r\n\t\t\tupdate_comment() {\r\n\t\t\t\tthis.get_comment(this.obj);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 获取评论\r\n\t\t\t * @param { Object } obj 文章对象\r\n\t\t\t * @param { Number } page 分页数\r\n\t\t\t * @param { Number } size 评论显示条数\r\n\t\t\t */\r\n\t\t\tget_comment(obj, page = 1, size = 5) {\r\n\t\t\t\tthis.$get(\r\n\t\t\t\t\t\t\"~/api/comment/get_list?\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\t\t\tsource_id: this.obj[\"book_information_id\"],\r\n\t\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\t\tsize,\r\n\t\t\t\t\t\t\treply_to_id: \"0\",\r\n\t\t\t\t\t\t\torderby: \"create_time desc\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(json) => {\r\n\t\t\t\t\t\t\tif (json.result) {\r\n\t\t\t\t\t\t\t\tvar list_comment = json.result.list;\r\n\t\t\t\t\t\t\t\tlist_comment.map((o) => {\r\n\t\t\t\t\t\t\t\t\to.list_reply = [];\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.add_reply(list_comment).then((list) => {\r\n\t\t\t\t\t\t\t\t\tthis.list_comment = list;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.count_pages = Math.ceil(json.result.count / size) || 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @param { Array } list 评论列表\r\n\t\t\t * 添加回复到评论列表\r\n\t\t\t */\r\n\t\t\tadd_reply(list) {\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\tfor (let idx = 0; idx < list.length; idx++) {\r\n\t\t\t\t\t\tconst obj = list[idx];\r\n\t\t\t\t\t\tthis.$get(\r\n\t\t\t\t\t\t\t\t\"~/api/comment/get_list?\",\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tsource_table: \"book_information\",\r\n\t\t\t\t\t\t\t\t\tsource_field: \"book_information_id\",\r\n\t\t\t\t\t\t\t\t\tsource_id: this.obj[\"book_information_id\"],\r\n\t\t\t\t\t\t\t\t\torderby: \"create_time desc\",\r\n\t\t\t\t\t\t\t\t\treply_to_id: obj.comment_id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t(res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.result) {\r\n\t\t\t\t\t\t\t\t\t\tobj.list_reply = res.result.list;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(list);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\trespondent() {\r\n\t\t\t\tvar reply_to_id = this.form_comment.reply_to_id;\r\n\t\t\t\tvar respondent = \"\";\r\n\t\t\t\tthis.list_comment.map((o) => {\r\n\t\t\t\t\tif (o.comment_id === reply_to_id) {\r\n\t\t\t\t\t\trespondent = o.nickname;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn respondent;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tmounted() {\r\n\r\n\t\t},\r\n\r\n\t}\r\n</script>\r\n\r\n<style>\r\n.qecode {\r\n  display: flex;\r\n  align-content: center;\r\n  width: 270px;\r\n  background: white;\r\n  position: absolute;\r\n  left: 20%;\r\n  top: 20px;\r\n  z-index: 999;\r\n}\r\n.qecodeImg {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-content: center;\r\n  text-align: center;\r\n  padding-top: 10px;\r\n  margin: 0 auto;\r\n}\r\n.btn_share{\r\n\tdisplay: inline-block;\r\n\tposition: relative;\r\n\ttop: 15px;\r\n\tbackground: rgb(240, 238, 238);\r\n\tborder: 1px solid #ccc;\r\n\theight: 38px;\r\n\tmargin-left: 10px;\r\n\tpadding: 3px 10px;\r\n\tcursor: pointer;\r\n\toverflow: hidden;\r\n\tborder-radius: 5px;\r\n}\r\n.btn_share_icon{\r\n\twidth: 30px;\r\n\theight: 28px;\r\n\tfloat: left;\r\n\tmargin-right: 10px;\r\n}\r\n.share_box{\r\n\tdisplay: none;\r\n\tfloat: left;\r\n}\r\n.share_box img{\r\n\twidth: 30px;\r\n\theight: 28px;\r\n\tmargin-right: 10px;\r\n}\r\n.btn_share:hover .share_box{\r\n\tdisplay: block;\r\n}\r\n</style>\r\n"]}]}