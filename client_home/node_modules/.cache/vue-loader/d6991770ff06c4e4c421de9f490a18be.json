{"remainingRequest":"C:\\Users\\123\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\123\\client_home\\src\\views\\article\\details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\123\\client_home\\src\\views\\article\\details.vue","mtime":1666697568000},{"path":"C:\\Users\\123\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\123\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\123\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\123\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogICAgaW1wb3J0IG1peGluIGZyb20gIkAvbWl4aW5zL3BhZ2UuanMiOw0KICAgIGltcG9ydCBiYXJfdGl0bGUgZnJvbSAiQC9jb21wb25lbnRzL2RpeS9iYXJfdGl0bGUudnVlIjsNCiAgICBpbXBvcnQgZGl2X2FydGljbGUgZnJvbSAiQC9jb21wb25lbnRzL2RpeS9kaXZfYXJ0aWNsZS52dWUiOw0KICAgIGltcG9ydCBsaXN0X2FydGljbGVfaG90IGZyb20gIkAvY29tcG9uZW50cy9kaXkvbGlzdF9hcnRpY2xlX2hvdC52dWUiOw0KICAgIGltcG9ydCBsaXN0X2NvbW1lbnQgZnJvbSAiQC9jb21wb25lbnRzL2RpeS9saXN0X2NvbW1lbnQudnVlIjsNCiAgICBpbXBvcnQgZm9ybV9lZGl0b3IgZnJvbSAiQC9jb21wb25lbnRzL2RpeS9mb3JtX2VkaXRvci52dWUiOw0KDQogICAgZXhwb3J0IGRlZmF1bHQgew0KICAgICAgICBtaXhpbnM6IFttaXhpbl0sDQogICAgICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgICAgIGxpc3RfY29tbWVudCwNCiAgICAgICAgICAgIGRpdl9hcnRpY2xlLA0KICAgICAgICAgICAgbGlzdF9hcnRpY2xlX2hvdCwNCiAgICAgICAgICAgIGJhcl90aXRsZSwNCiAgICAgICAgICAgIGZvcm1fZWRpdG9yLA0KICAgICAgICB9LA0KICAgICAgICBkYXRhKCkgew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICB1cmxfZ2V0X29iajogIn4vYXBpL2FydGljbGUvZ2V0X29iaj8iLA0KICAgICAgICAgICAgICAgIGZpZWxkOiAiYXJ0aWNsZV9pZCIsDQogICAgICAgICAgICAgICAgb2JqOiB7fSwNCiAgICAgICAgICAgICAgICBxdWVyeTogew0KICAgICAgICAgICAgICAgICAgICBhcnRpY2xlX2lkOiAwLA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgbGlzdF9ob3Q6IFtdLA0KICAgICAgICAgICAgICAgIGxpc3RfY29tbWVudDogW10sDQogICAgICAgICAgICAgICAgZm9ybV9jb21tZW50OiB7DQogICAgICAgICAgICAgICAgICAgIHNvdXJjZV90YWJsZTogImFydGljbGUiLA0KICAgICAgICAgICAgICAgICAgICBzb3VyY2VfZmllbGQ6ICJhcnRpY2xlX2lkIiwNCiAgICAgICAgICAgICAgICAgICAgc291cmNlX2lkOiAwLA0KICAgICAgICAgICAgICAgICAgICByZXBseV90b19pZDogMCwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGNvdW50X3BhZ2VzOiAxLCAvLyDpobXpnaLmlbANCiAgICAgICAgICAgICAgICBzZXRlZF9jb3VudF9wYWdlczogdHJ1ZSwgLy8g5piv5ZCm6K6+572u6L+HDQogICAgICAgICAgICB9Ow0KICAgICAgICB9LA0KICAgICAgICBtZXRob2RzOiB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIOiOt+WPluivhOiuuuWQjg0KICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGpzb24g5ZON5bqU5a+56LGhDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGdldF9vYmpfYWZ0ZXIoanNvbikgew0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9jb21tZW50LnNvdXJjZV9pZCA9IHRoaXMucXVlcnkuYXJ0aWNsZV9pZDsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIOiOt+WPlueDremXqOaWh+eroA0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBnZXRfaG90X2FydGljbGUoKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kZ2V0KA0KICAgICAgICAgICAgICAgICAgICAifi9hcGkvYXJ0aWNsZS9nZXRfbGlzdCIsDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICBzaXplOiAxMCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYnk6ICJoaXRzIiwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5yZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RfaG90ID0gcmVzLnJlc3VsdC5saXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIOiOt+WPluivhOiuug0KICAgICAgICAgICAgICogQHBhcmFtIHsgT2JqZWN0IH0gb2JqIOaWh+eroOWvueixoQ0KICAgICAgICAgICAgICogQHBhcmFtIHsgTnVtYmVyIH0gcGFnZSDliIbpobXmlbANCiAgICAgICAgICAgICAqIEBwYXJhbSB7IE51bWJlciB9IHNpemUg6K+E6K665pi+56S65p2h5pWwDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGdldF9jb21tZW50KG9iaixwYWdlID0gMSwgc2l6ZSA9IDUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRnZXQoDQogICAgICAgICAgICAgICAgICAgICJ+L2FwaS9jb21tZW50L2dldF9saXN0PyIsDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV90YWJsZTogImFydGljbGUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX2ZpZWxkOiAiYXJ0aWNsZV9pZCIsDQogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfaWQ6IHRoaXMub2JqLmFydGljbGVfaWQsDQogICAgICAgICAgICAgICAgICAgICAgICBwYWdlLA0KICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5X3RvX2lkOiAiMCIsDQogICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmJ5OiAiY3JlYXRlX3RpbWUgZGVzYyIsDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIChqc29uKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5yZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdF9jb21tZW50ID0ganNvbi5yZXN1bHQubGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0X2NvbW1lbnQubWFwKChvKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ubGlzdF9yZXBseSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkX3JlcGx5KGxpc3RfY29tbWVudCkudGhlbigobGlzdCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RfY29tbWVudCA9IGxpc3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YiG6aG15ZmoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMuc2V0ZWRfY291bnRfcGFnZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRoaXMuc2V0ZWRfY291bnRfcGFnZXMgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRoaXMuY291bnRfcGFnZXMgPSBNYXRoLmNlaWwoanNvbi5yZXN1bHQuY291bnQgLyBzaXplKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudF9wYWdlcyA9IE1hdGguY2VpbChqc29uLnJlc3VsdC5jb3VudCAvIHNpemUpIHx8IDENCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9LA0KDQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIEBwYXJhbSB7IEFycmF5IH0gbGlzdCDor4TorrrliJfooagNCiAgICAgICAgICAgICAqIOa3u+WKoOWbnuWkjeWIsOivhOiuuuWIl+ihqA0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBhZGRfcmVwbHkobGlzdCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBsaXN0Lmxlbmd0aDsgaWR4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IGxpc3RbaWR4XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGdldCgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAifi9hcGkvY29tbWVudC9nZXRfbGlzdD8iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX3RhYmxlOiAiYXJ0aWNsZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9maWVsZDogImFydGljbGVfaWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfaWQ6IG9iai5hcnRpY2xlX2lkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmJ5OiAiY3JlYXRlX3RpbWUgZGVzYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5X3RvX2lkOiBvYmouY29tbWVudF9pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5yZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5saXN0X3JlcGx5ID0gcmVzLnJlc3VsdC5saXN0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGxpc3QpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwNCg0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiDmm7TmlrDor4TorroNCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgdXBkYXRlX2NvbW1lbnQoKSB7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRfY29tbWVudCh0aGlzLm9iaik7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiDliIbpobXlmagNCiAgICAgICAgICAgICAqIEBwYXJhbSB7IE51bWJlciB9IHBhZ2VfbnVtIOWIhumhteaVsA0KICAgICAgICAgICAgICogQHJldHVybiB7IE9iamVjdCB9IOafpeivouWvueixoQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBsaW5rX2dlbihwYWdlX251bSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJ5LA0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKuWKoOi9veS4i+S4gOmhtQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBjaGFuZ2VfcGFnZShwYWdlX251bSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0X2NvbW1lbnQodGhpcy5vYmosIHBhZ2VfbnVtKTsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1fY29tbWVudC5yZXBseV90b19pZCA9IDA7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiDojrflj5blr7nosaHkuYvlkI4NCiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBqc29uIOe7k+aenOWvueixoQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBnZXRfb2JqX2FmdGVyKGpzb24pIHsNCiAgICAgICAgICAgICAgbGV0IG9iaiA9IGpzb24ucmVzdWx0Lm9iajsNCiAgICAgICAgICAgICAgdGhpcy5hZGRfaGl0cyhvYmopDQogICAgICAgICAgICAgIHRoaXMuZ2V0X2NvbW1lbnQob2JqKTsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtX2NvbW1lbnQuc291cmNlX2lkID0gb2JqLmFydGljbGVfaWQ7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiDmt7vliqDorr/pl67ph48NCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgYWRkX2hpdHMob2JqKSB7DQogICAgICAgICAgICAgIHRoaXMuJHBvc3QoJ34vYXBpL2FydGljbGUvc2V0P2FydGljbGVfaWQ9JyArIG9iai5hcnRpY2xlX2lkLCB7DQogICAgICAgICAgICAgICAgaGl0czogcGFyc2VJbnQob2JqLmhpdHMpICsgMQ0KICAgICAgICAgICAgICB9LCByZXMgPT4gew0KICAgICAgICAgICAgICAgIG9iai5oaXRzID1wYXJzZUludChvYmouaGl0cykrIDENCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjb21wdXRlZDogew0KICAgICAgICAgICAgcmVzcG9uZGVudCgpIHsNCiAgICAgICAgICAgICAgICB2YXIgcmVwbHlfdG9faWQgPSB0aGlzLmZvcm1fY29tbWVudC5yZXBseV90b19pZDsNCiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uZGVudCA9ICIiOw0KICAgICAgICAgICAgICAgIHRoaXMubGlzdF9jb21tZW50Lm1hcCgobykgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoby5jb21tZW50X2lkID09PSByZXBseV90b19pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uZGVudCA9IG8ubmlja25hbWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uZGVudDsNCiAgICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICAgIG1vdW50ZWQoKSB7DQogICAgICAgICAgICB0aGlzLmdldF9ob3RfYXJ0aWNsZSgpOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRfY29tbWVudCgpOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH0sDQogICAgfTsNCg=="},{"version":3,"sources":["details.vue"],"names":[],"mappings":";AA4EA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"details.vue","sourceRoot":"src/views/article","sourcesContent":["<template>\r\n    <div class=\"page_article\">\r\n        <div class=\"warp\" v-if=\"$check_action('/article/list', 'get')\">\r\n            <div class=\"container\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-12 col-lg-9 col-md-12\">\r\n                        <div class=\"card\">\r\n                            <!-- 文章详情 -->\r\n                            <div class=\"article_detail\">\r\n                                <div_article :obj=\"obj\"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-12 col-lg-3\">\r\n                          <!-- 热门文章推荐 -->\r\n                          <div class=\"list_hot\">\r\n                              <div class=\"hot_title\">\r\n                                  热门文章推荐\r\n                              </div>\r\n                              <list_article_hot :list=\"list_hot\"/>\r\n                          </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"comments-wrap warp\" v-if=\"$check_action('/comment/list', 'get')\">\r\n            <div class=\"container\">\r\n                <div class=\"row\">\r\n                    <!-- 评论区 -->\r\n                    <div class=\"col\">\r\n                        <bar_title class=\"mt\" title=\"评论区\"/>\r\n                        <div class=\"comment_box\">\r\n                            <list_comment\r\n                                    class=\"w-100\"\r\n                                    :list=\"list_comment\"\r\n                                    :obj=\"form_comment\"\r\n                            />\r\n                            <b-pagination-nav\r\n                                    :base-url=\"$route.path\"\r\n                                    :number-of-pages=\"count_pages\"\r\n                                    :link-gen=\"link_gen\"\r\n                                    @change=\"change_page\"\r\n                                    first-number\r\n                                    last-number\r\n                            />\r\n                        </div>\r\n\r\n                        <!-- 发表评论 -->\r\n                        <div class=\"form_editor\">\r\n                            <div class=\"fl ml-3\" v-show=\"form_comment.reply_to_id\">\r\n                                对 <i>{{ respondent }}</i> 回复\r\n                            </div>\r\n                            <div class=\"fr mr-3\" v-show=\"form_comment.reply_to_id\">\r\n                                <b-button\r\n                                        variant=\"outline-primary\"\r\n                                        size=\"sm\"\r\n                                        @click=\"form_comment.reply_to_id = 0\"\r\n                                >重置回复人\r\n                                </b-button\r\n                                >\r\n                            </div>\r\n                            <form_editor\r\n                                    class=\"fn\"\r\n                                    :form=\"form_comment\"\r\n                                    @update_comment=\"update_comment\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import mixin from \"@/mixins/page.js\";\r\n    import bar_title from \"@/components/diy/bar_title.vue\";\r\n    import div_article from \"@/components/diy/div_article.vue\";\r\n    import list_article_hot from \"@/components/diy/list_article_hot.vue\";\r\n    import list_comment from \"@/components/diy/list_comment.vue\";\r\n    import form_editor from \"@/components/diy/form_editor.vue\";\r\n\r\n    export default {\r\n        mixins: [mixin],\r\n        components: {\r\n            list_comment,\r\n            div_article,\r\n            list_article_hot,\r\n            bar_title,\r\n            form_editor,\r\n        },\r\n        data() {\r\n            return {\r\n                url_get_obj: \"~/api/article/get_obj?\",\r\n                field: \"article_id\",\r\n                obj: {},\r\n                query: {\r\n                    article_id: 0,\r\n                },\r\n                list_hot: [],\r\n                list_comment: [],\r\n                form_comment: {\r\n                    source_table: \"article\",\r\n                    source_field: \"article_id\",\r\n                    source_id: 0,\r\n                    reply_to_id: 0,\r\n                },\r\n                count_pages: 1, // 页面数\r\n                seted_count_pages: true, // 是否设置过\r\n            };\r\n        },\r\n        methods: {\r\n            /**\r\n             * 获取评论后\r\n             * @param {Object} json 响应对象\r\n             */\r\n            get_obj_after(json) {\r\n                this.form_comment.source_id = this.query.article_id;\r\n            },\r\n            /**\r\n             * 获取热门文章\r\n             */\r\n            get_hot_article() {\r\n                this.$get(\r\n                    \"~/api/article/get_list\",\r\n                    {\r\n                        page: 1,\r\n                        size: 10,\r\n                        orderby: \"hits\",\r\n                    },\r\n                    (res) => {\r\n                        if (res.result) {\r\n                            this.list_hot = res.result.list;\r\n                        }\r\n                    }\r\n                );\r\n            },\r\n            /**\r\n             * 获取评论\r\n             * @param { Object } obj 文章对象\r\n             * @param { Number } page 分页数\r\n             * @param { Number } size 评论显示条数\r\n             */\r\n            get_comment(obj,page = 1, size = 5) {\r\n                this.$get(\r\n                    \"~/api/comment/get_list?\",\r\n                    {\r\n                        source_table: \"article\",\r\n                        source_field: \"article_id\",\r\n                        source_id: this.obj.article_id,\r\n                        page,\r\n                        size,\r\n                        reply_to_id: \"0\",\r\n                        orderby: \"create_time desc\",\r\n                    },\r\n                    (json) => {\r\n                        if (json.result) {\r\n                            var list_comment = json.result.list;\r\n                            list_comment.map((o) => {\r\n                                o.list_reply = [];\r\n                            });\r\n                            this.add_reply(list_comment).then((list) => {\r\n                                this.list_comment = list;\r\n                            });\r\n                            // 分页器\r\n                            // if (this.seted_count_pages) {\r\n                            //   this.seted_count_pages = false;\r\n                            //   this.count_pages = Math.ceil(json.result.count / size);\r\n                            // }\r\n                            this.count_pages = Math.ceil(json.result.count / size) || 1\r\n                        }\r\n                    }\r\n                );\r\n            },\r\n\r\n            /**\r\n             * @param { Array } list 评论列表\r\n             * 添加回复到评论列表\r\n             */\r\n            add_reply(list) {\r\n                return new Promise((resolve) => {\r\n                    for (let idx = 0; idx < list.length; idx++) {\r\n                        const obj = list[idx];\r\n                        this.$get(\r\n                            \"~/api/comment/get_list?\",\r\n                            {\r\n                                source_table: \"article\",\r\n                                source_field: \"article_id\",\r\n                                source_id: obj.article_id,\r\n                                orderby: \"create_time desc\",\r\n                                reply_to_id: obj.comment_id,\r\n                            },\r\n                            (res) => {\r\n                                if (res.result) {\r\n                                    obj.list_reply = res.result.list;\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    resolve(list);\r\n                });\r\n            },\r\n\r\n            /**\r\n             * 更新评论\r\n             */\r\n            update_comment() {\r\n                this.get_comment(this.obj);\r\n            },\r\n            /**\r\n             * 分页器\r\n             * @param { Number } page_num 分页数\r\n             * @return { Object } 查询对象\r\n             */\r\n            link_gen(page_num) {\r\n                return {\r\n                    query: this.query,\r\n                };\r\n            },\r\n            /**\r\n             *加载下一页\r\n             */\r\n            change_page(page_num) {\r\n                this.get_comment(this.obj, page_num);\r\n                this.form_comment.reply_to_id = 0;\r\n            },\r\n            /**\r\n             * 获取对象之后\r\n             * @param {Object} json 结果对象\r\n             */\r\n            get_obj_after(json) {\r\n              let obj = json.result.obj;\r\n              this.add_hits(obj)\r\n              this.get_comment(obj);\r\n              this.form_comment.source_id = obj.article_id;\r\n            },\r\n            /**\r\n             * 添加访问量\r\n             */\r\n            add_hits(obj) {\r\n              this.$post('~/api/article/set?article_id=' + obj.article_id, {\r\n                hits: parseInt(obj.hits) + 1\r\n              }, res => {\r\n                obj.hits =parseInt(obj.hits)+ 1\r\n                console.log(res);\r\n              })\r\n            }\r\n        },\r\n        computed: {\r\n            respondent() {\r\n                var reply_to_id = this.form_comment.reply_to_id;\r\n                var respondent = \"\";\r\n                this.list_comment.map((o) => {\r\n                    if (o.comment_id === reply_to_id) {\r\n                        respondent = o.nickname;\r\n                    }\r\n                });\r\n                return respondent;\r\n            },\r\n        },\r\n        mounted() {\r\n            this.get_hot_article();\r\n            setTimeout(() => {\r\n                this.get_comment();\r\n            }, 1000);\r\n        },\r\n    };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .card {\r\n        border-radius: 0.5rem;\r\n    }\r\n\r\n    .list_hot {\r\n      color: white;\r\n      background-color: var(--color_primary);\r\n      margin: 0.5rem;\r\n      padding: 1rem;\r\n      border-radius: 0.5rem;\r\n    }\r\n\r\n    .hot_title {\r\n      height: 4rem;\r\n      font-size: 1.2rem;\r\n      font-weight: bold;\r\n      align-items: center;\r\n      justify-content: center;\r\n      display: flex;\r\n      margin-bottom: 1rem;\r\n    }\r\n\r\n    .form_editor {\r\n        padding: 10px;\r\n    }\r\n\r\n    .comment_box {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n</style>\r\n"]}]}