{"remainingRequest":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\components\\diy\\form_editor.vue?vue&type=style&index=0&id=4a2a23ed&scoped=true&lang=css&","dependencies":[{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\components\\diy\\form_editor.vue","mtime":1657768166000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5idG5fcHVibGlzaCB7CiAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgbWFyZ2luLXRvcDogMTBweDsKfQouYnRuX3B1Ymxpc2ggYnV0dG9uIHsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgY3Vyc29yOiBwb2ludGVyOwp9Ci5idG5fcHVibGlzaCBidXR0b246aG92ZXIgewogIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yX3N1Y2Nlc3NfYik7CiAgY29sb3I6IHdoaXRlOwp9Cg=="},{"version":3,"sources":["form_editor.vue"],"names":[],"mappings":";AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form_editor.vue","sourceRoot":"src/components/diy","sourcesContent":["<template>\n  <div v-if=\"publish_flag\" class=\"form_editor\">\n    <div class=\"editor\">\n      <!-- 富文本编辑 -->\n      <quill-editor v-model.trim=\"form.content\" class=\"form_editor_block\">\n      </quill-editor>\n    </div>\n    <div class=\"btn_publish\">\n      <b-button variant=\"outline-primary\" block @click=\"publish()\">发表</b-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport mixin from \"@/mixins/component.js\";\nexport default {\n  mixins: [mixin],\n  props: {\n    form: {\n      type: Object,\n      default() {\n        return {\n          content: \"\",\n        };\n      },\n    },\n    post_url: {\n      type: String,\n      default() {\n        return \"\";\n      },\n    },\n    publish_flag:{\n      type: Boolean,\n      default() {\n        return true;\n      },\n    }\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    /**\n     * 发表评论\n     */\n    publish() {\n      if (!this.user.user_id) {\n        this.$router.push(\"/account/login\");\n        return\n      }\n      var form = this.form;\n      form = Object.assign(form, {\n        user_id: this.user.user_id,\n        avatar: this.user.avatar,\n        nickname: this.user.nickname,\n      });\n      if(!form.content){\n        this.$toast(\"输入内容不能为空\")\n        return\n      }\n      var post_url = this.post_url\n      if(!post_url){\n        post_url = \"~/api/comment/add?\"\n      }\n      this.$post(post_url, form, (res) => {\n        if (res.result) {\n          this.$emit(\"update_comment\");\n          this.form.content = \"\";\n        } else if (res.error) {\n          this.$toast(res.error.message);\n        }\n      });\n    },\n  },\n  components: {},\n};\n</script>\n\n<style scoped>\n.btn_publish {\n  text-align: right;\n  margin-top: 10px;\n}\n.btn_publish button {\n  border-radius: 3px;\n  cursor: pointer;\n}\n.btn_publish button:hover {\n  background: var(--color_success_b);\n  color: white;\n}\n</style>\n"]}]}