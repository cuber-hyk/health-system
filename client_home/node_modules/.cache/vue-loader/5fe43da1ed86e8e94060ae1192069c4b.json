{"remainingRequest":"C:\\Users\\bishe\\Desktop\\springboot专利管理系统[编号：CS781820_20220828094342] (4)\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\bishe\\Desktop\\springboot专利管理系统[编号：CS781820_20220828094342] (4)\\client_home\\src\\views\\goods\\details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\bishe\\Desktop\\springboot专利管理系统[编号：CS781820_20220828094342] (4)\\client_home\\src\\views\\goods\\details.vue","mtime":1675233590000},{"path":"C:\\Users\\bishe\\Desktop\\springboot专利管理系统[编号：CS781820_20220828094342] (4)\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\bishe\\Desktop\\springboot专利管理系统[编号：CS781820_20220828094342] (4)\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\bishe\\Desktop\\springboot专利管理系统[编号：CS781820_20220828094342] (4)\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\bishe\\Desktop\\springboot专利管理系统[编号：CS781820_20220828094342] (4)\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBtaXhpbiBmcm9tICIuLi8uLi9taXhpbnMvcGFnZS5qcyI7CmltcG9ydCBsaXN0X2dvb2RzX2hvdCBmcm9tICIuLi8uLi9jb21wb25lbnRzL2RpeS9saXN0X2dvb2RzX2hvdC52dWUiOwppbXBvcnQgbGlzdF9jb21tZW50IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvZGl5L2xpc3RfY29tbWVudC52dWUiOwppbXBvcnQgZGl2X2dvb2RzIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvZGl5L2Rpdl9nb29kcy52dWUiOwppbXBvcnQgZm9ybV9lZGl0b3IgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9kaXkvZm9ybV9lZGl0b3IudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW21peGluXSwKICBjb21wb25lbnRzOiB7CiAgICBsaXN0X2NvbW1lbnQsCiAgICBsaXN0X2dvb2RzX2hvdCwKICAgIGRpdl9nb29kcywKICAgIGZvcm1fZWRpdG9yLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVybF9nZXRfb2JqOiAifi9hcGkvZ29vZHMvZ2V0X29iaj8iLAogICAgICBxdWVyeTogewogICAgICAgIGdvb2RzX2lkOiAwLAogICAgICB9LAogICAgICBsaXN0X2NvbW1lbnQ6IFtdLAogICAgICBsaXN0X2hvdDogW10sCiAgICAgIHNlbGVjdGVkX2luZGV4OiAyLAogICAgICBmb3JtX2NvbW1lbnQ6IHsKICAgICAgICBzb3VyY2VfdGFibGU6ICJnb29kcyIsCiAgICAgICAgc291cmNlX2ZpZWxkOiAiZ29vZHNfaWQiLAogICAgICAgIHNvdXJjZV9pZDogMCwKICAgICAgICByZXBseV90b19pZDogMCwKICAgICAgICBjb250ZW50OicnCiAgICAgIH0sCiAgICAgIC8vIOmhtemdouaVsAogICAgICBjb3VudF9wYWdlczogMSwKICAgICAgLy8g5piv5ZCm6K6+572u6L+HCiAgICAgIHNldGVkX2NvdW50X3BhZ2VzOiB0cnVlLAogICAgICBvYmo6IHsKICAgICAgICBnb29kc19pZDogMCwKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgaW1nOiAiIiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgcHJpY2VfYWdvOiAwLAogICAgICAgIHByaWNlOiAwLAogICAgICAgIHNhbGVzOiAwLAogICAgICAgIGludmVudG9yeTogMCwKICAgICAgICB0eXBlOiAiIiwKICAgICAgICBoaXRzOiAwLAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIGNyZWF0ZV90aW1lOiAiMjAyMS0wMi0yMCAyMDo0ODowNyIsCiAgICAgICAgdXBkYXRlX3RpbWU6ICIyMDIxLTAzLTMwIDE3OjQ4OjA3IiwKICAgICAgICBpbWdfMTogIiIsCiAgICAgICAgaW1nXzI6ICIiLAogICAgICAgIGltZ18zOiAiIiwKICAgICAgICBpbWdfNDogIiIsCiAgICAgICAgaW1nXzU6ICIiLAogICAgICAgIHNvdXJjZV90YWJsZTogIiIsCiAgICAgICAgc291cmNlX2ZpZWxkOiAiIiwKICAgICAgICBzb3VyY2VfaWQ6IDAsCiAgICAgICAgbnVtX2J1eTogMSwKICAgICAgICBjdXN0b21pemVfZmllbGQ6IiIsCiAgICAgICAgdXNlcl9pZDowCiAgICAgIH0sCiAgICAgIHB1Ymxpc2hfZmxhZzpmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICog6I635Y+W6K+E6K665ZCOCiAgICAgKiBAcGFyYW0ge09iamVjdH0ganNvbiDlk43lupTlr7nosaEKICAgICAqLwogICAgZ2V0X29ial9hZnRlcihqc29uKSB7CiAgICAgIHZhciBvYmogPSBqc29uLnJlc3VsdC5vYmo7CiAgICAgIHRoaXMuZ2V0X2NvbW1lbnQob2JqKTsKICAgICAgb2JqLm51bV9idXkgPSAxOwogICAgICB0aGlzLmZvcm1fY29tbWVudC5zb3VyY2VfaWQgPSBvYmouZ29vZHNfaWQ7CiAgICAgIHRoaXMuJGdldCgifi9hcGkvb3JkZXIvZ2V0X29iaj8iLCB7Imdvb2RzX2lkIjpvYmouZ29vZHNfaWQsInVzZXJfaWQiOnRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9pZCwic3RhdGUiOiLlt7Lku5jmrL4ifSwgKGpzb24pID0+IHsKICAgICAgICBpZiAoanNvbi5yZXN1bHQgJiYganNvbi5yZXN1bHQub2JqKSB7CiAgICAgICAgICB0aGlzLnB1Ymxpc2hfZmxhZyA9IHRydWUKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgLyoqCiAgICAgKiDojrflvpfng63pl6jllYblk4EKICAgICAqLwogICAgZ2V0X2hvdF9nb29kcygpIHsKICAgICAgdGhpcy4kZ2V0KAogICAgICAgICJ+L2FwaS9nb29kcy9nZXRfbGlzdCIsCiAgICAgICAgewogICAgICAgICAgcGFnZTogMSwKICAgICAgICAgIHNpemU6IDUsCiAgICAgICAgICBvcmRlcmJ5OiAiaGl0cyIsCiAgICAgICAgfSwKICAgICAgICAocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLnJlc3VsdCkgewogICAgICAgICAgICB0aGlzLmxpc3RfaG90ID0gcmVzLnJlc3VsdC5saXN0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICAvKioKICAgICAqIOabtOaWsOivhOiuugogICAgICovCiAgICB1cGRhdGVfY29tbWVudCgpIHsKICAgICAgdGhpcy5nZXRfY29tbWVudCh0aGlzLm9iaik7CiAgICB9LAoKICAgIC8qKgogICAgICog6I635Y+W6K+E6K66CiAgICAgKiBAcGFyYW0geyBPYmplY3QgfSBvYmog5paH56ug5a+56LGhCiAgICAgKiBAcGFyYW0geyBOdW1iZXIgfSBwYWdlIOWIhumhteaVsAogICAgICogQHBhcmFtIHsgTnVtYmVyIH0gc2l6ZSDor4TorrrmmL7npLrmnaHmlbAKICAgICAqLwogICAgZ2V0X2NvbW1lbnQob2JqLCBwYWdlID0gMSwgc2l6ZSA9IDUpIHsKICAgICAgdGhpcy4kZ2V0KAogICAgICAgICJ+L2FwaS9jb21tZW50L2dldF9saXN0PyIsCiAgICAgICAgewogICAgICAgICAgc291cmNlX3RhYmxlOiAiZ29vZHMiLAogICAgICAgICAgc291cmNlX2ZpZWxkOiAiZ29vZHNfaWQiLAogICAgICAgICAgc291cmNlX2lkOiBvYmouZ29vZHNfaWQsCiAgICAgICAgICBwYWdlLAogICAgICAgICAgc2l6ZSwKICAgICAgICAgIG9yZGVyYnk6ICJjcmVhdGVfdGltZSBkZXNjIiwKICAgICAgICAgIHJlcGx5X3RvX2lkOiAiMCIsCiAgICAgICAgfSwKICAgICAgICAoanNvbikgPT4gewogICAgICAgICAgaWYgKGpzb24ucmVzdWx0KSB7CiAgICAgICAgICAgIHZhciBsaXN0X2NvbW1lbnQgPSBqc29uLnJlc3VsdC5saXN0OwogICAgICAgICAgICBsaXN0X2NvbW1lbnQubWFwKG89PnsKICAgICAgICAgICAgICBvLmxpc3RfcmVwbHkgPSBbXQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmFkZF9yZXBseShsaXN0X2NvbW1lbnQpLnRoZW4oKGxpc3QpID0+IHsKICAgICAgICAgICAgICB0aGlzLmxpc3RfY29tbWVudCA9IGxpc3Q7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyDliIbpobXlmagKICAgICAgICAgICAgaWYgKHRoaXMuc2V0ZWRfY291bnRfcGFnZXMpIHsKICAgICAgICAgICAgICB0aGlzLnNldGVkX2NvdW50X3BhZ2VzID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy5jb3VudF9wYWdlcyA9IE1hdGguY2VpbChqc29uLnJlc3VsdC5jb3VudCAvIHNpemUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICApOwogICAgfSwKICAgIC8qKgogICAgICogQHBhcmFtIHsgQXJyYXkgfSBsaXN0IOivhOiuuuWIl+ihqAogICAgICog5re75Yqg5Zue5aSN5Yiw6K+E6K665YiX6KGoCiAgICAgKi8KICAgIGFkZF9yZXBseShsaXN0KSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGxpc3QubGVuZ3RoOyBpZHgrKykgewogICAgICAgICAgY29uc3Qgb2JqID0gbGlzdFtpZHhdOwogICAgICAgICAgdGhpcy4kZ2V0KAogICAgICAgICAgICAifi9hcGkvY29tbWVudC9nZXRfbGlzdD8iLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgc291cmNlX3RhYmxlOiAiZ29vZHMiLAogICAgICAgICAgICAgIHNvdXJjZV9maWVsZDogImdvb2RzX2lkIiwKICAgICAgICAgICAgICBzb3VyY2VfaWQ6IG9iai5nb29kc19pZCwKICAgICAgICAgICAgICBvcmRlcmJ5OiAiY3JlYXRlX3RpbWUgZGVzYyIsCiAgICAgICAgICAgICAgcmVwbHlfdG9faWQ6IG9iai5jb21tZW50X2lkLAogICAgICAgICAgICB9LAogICAgICAgICAgICAocmVzKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlcy5yZXN1bHQpIHsKICAgICAgICAgICAgICAgIG9iai5saXN0X3JlcGx5ID0gcmVzLnJlc3VsdC5saXN0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcmVzb2x2ZShsaXN0KTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDliIbpobXlmagKICAgICAqIEBwYXJhbSB7IE51bWJlciB9IHBhZ2VfbnVtIOWIhumhteaVsAogICAgICogQHJldHVybiB7IE9iamVjdCB9IOafpeivouWvueixoQogICAgICovCiAgICBsaW5rX2dlbihwYWdlX251bSkgewogICAgICByZXR1cm4gewogICAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJ5LAogICAgICB9OwogICAgfSwKICAgIC8qKgogICAgICog5Yqg6L295LiL5LiA6aG1CiAgICAgKi8KICAgIGNoYW5nZV9wYWdlKHBhZ2VfbnVtKSB7CiAgICAgIHRoaXMuZ2V0X2NvbW1lbnQodGhpcy5vYmosIHBhZ2VfbnVtKTsKICAgICAgdGhpcy5mb3JtX2NvbW1lbnQucmVwbHlfdG9faWQgPSAwOwogICAgfSwKICAgIC8vIOiOt+W+l+WVhuWTgei9ruaSreWbvgogICAgY3VzdG9taXplX2ZpZWxkX2xpc3Q6IGZ1bmN0aW9uKCkgewogICAgICBpZiAodGhpcy5vYmouY3VzdG9taXplX2ZpZWxkKSB7CiAgICAgICAgbGV0IGxpc3RfZmllbGRzID0gSlNPTi5wYXJzZSh0aGlzLm9iai5jdXN0b21pemVfZmllbGQpCiAgICAgICAgcmV0dXJuIGxpc3RfZmllbGRzOwogICAgICB9CiAgICAgIHJldHVybiBbXQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qKgogICAgICog6I635b6X5Zu+54mH5YiX6KGoCiAgICAgKi8KICAgIGxpc3RfaW1nKCkgewogICAgICB2YXIgeyBpbWdfMSwgaW1nXzIsIGltZ18zLCBpbWdfNCB9ID0gdGhpcy5vYmo7CiAgICAgIHZhciBsaXN0X2ltZyA9IFtdOwogICAgICBpZiAoaW1nXzEpIHsKICAgICAgICBsaXN0X2ltZy5wdXNoKGltZ18xKTsKICAgICAgfQogICAgICBpZiAoaW1nXzIpIHsKICAgICAgICBsaXN0X2ltZy5wdXNoKGltZ18yKTsKICAgICAgfQogICAgICBpZiAoaW1nXzMpIHsKICAgICAgICBsaXN0X2ltZy5wdXNoKGltZ18zKTsKICAgICAgfQogICAgICBpZiAoaW1nXzQpIHsKICAgICAgICBsaXN0X2ltZy5wdXNoKGltZ180KTsKICAgICAgfQogICAgICByZXR1cm4gbGlzdF9pbWc7CiAgICB9LAogICAgcmVzcG9uZGVudCgpIHsKICAgICAgdmFyIHJlcGx5X3RvX2lkID0gdGhpcy5mb3JtX2NvbW1lbnQucmVwbHlfdG9faWQ7CiAgICAgIHZhciByZXNwb25kZW50ID0gIiI7CiAgICAgIHRoaXMubGlzdF9jb21tZW50Lm1hcCgobykgPT4gewogICAgICAgIGlmIChvLmNvbW1lbnRfaWQgPT09IHJlcGx5X3RvX2lkKSB7CiAgICAgICAgICByZXNwb25kZW50ID0gby5uaWNrbmFtZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzcG9uZGVudDsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRfaG90X2dvb2RzKCk7CiAgfSwKfTsK"},{"version":3,"sources":["details.vue"],"names":[],"mappings":";AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"details.vue","sourceRoot":"src/views/goods","sourcesContent":["<template>\n  <div class=\"page_goods\" id=\"goods_details\">\n    <div class=\"warp\" v-if=\"$check_action('/goods/details', 'get')\">\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col-12 col-md-10\">\n            <div class=\"pr-md-2\">\n              <!-- 商品详情 -->\n              <div class=\"card_div_goods\">\n                <div_goods :obj=\"obj\" :list_img=\"list_img\"></div_goods>\n              </div>\n              <div class=\"card_bottom_goods\">\n                <div class=\"options pl-3\">\n                  <span\n                    @click=\"selected_index = 1\"\n                    :class=\"{ selected: selected_index === 1 }\"\n                    >详情</span\n                  >\n                  <span\n                    @click=\"selected_index = 2\"\n                    :class=\"{ selected: selected_index === 2 }\"\n                    >评论</span\n                  >\n                </div>\n                <div v-if=\"selected_index === 2\" class=\"comment_box\">\n                  <list_comment\n                    class=\"w-100\"\n                    :list=\"list_comment\"\n                    :obj=\"form_comment\"\n                  ></list_comment>\n\n                  <!-- 分页器 -->\n                  <b-pagination-nav\n                    :base-url=\"$route.path\"\n                    :number-of-pages=\"count_pages\"\n                    :link-gen=\"link_gen\"\n                    @change=\"change_page\"\n                    first-number\n                    last-number\n                  ></b-pagination-nav>\n\n\n                  <div class=\"form_editor\">\n                    <div class=\"fl ml-3\" v-show=\"form_comment.reply_to_id\">\n                      对 <i>{{ respondent }}</i> 回复\n                    </div>\n                    <div class=\"fr mr-3\" v-show=\"form_comment.reply_to_id\">\n                      <b-button\n                        variant=\"outline-primary\"\n                        size=\"sm\"\n                        @click=\"form_comment.reply_to_id = 0\"\n                        >重置回复人</b-button\n                      >\n                    </div>\n                    <form_editor\n                      class=\"fn\"\n                      :form=\"form_comment\"\n                      :publish_flag = \"publish_flag\"\n                      @update_comment=\"update_comment\"\n                    ></form_editor>\n                  </div>\n                </div>\n\n                <div class=\"goods_desc_box\" v-else>\n                  <div class=\"goods_detail_item\" v-for=\"o in customize_field_list()\" :key=\"o\">\n                    <label>{{o.field_name+\" : \"}}</label>\n                    <span v-if=\"o.type==='image'\">\n                                            <img style=\"height: 150px\" :src=\"$fullUrl(o.field_value)\" v-if=\"o.field_value\" />\n                                        </span>\n                    <span v-else-if=\"o.type==='video'\">\n                                            <router-link :to=\"'/media/video?filename=' + $fullUrl(o.field_value)\" v-if=\"o.field_value\" >\n                                                <span>\n                                                    查看视频\n                                                </span>\n                                            </router-link>\n                                        </span>\n                    <span v-else-if=\"o.type==='audio'\">\n\t\t\t\t\t\t\t                <audio v-if=\"o.field_value\" style=\"text-align: left\" :src=\"$fullUrl(o.field_value)\" controls></audio>\n                                        </span>\n                    <span v-else-if=\"o.type==='file'\">\n\t\t\t\t\t\t\t                <a :href=\"$fullUrl(o.field_value)\" v-if=\"o.field_value\" target=\"_blank\" style=\"color: rgb(64, 158, 255);\">点击下载</a>\n                                        </span>\n                    <span v-else-if=\"o.type==='date'\">\n\t\t\t\t\t\t\t                {{$toTime(o.field_value,\"yyyy-MM-dd\")}}\n                                        </span>\n                    <span v-else-if=\"o.type==='time'\">\n\t\t\t\t\t\t\t                {{$toTime(o.field_value,\"hh:mm:ss\")}}\n                                        </span>\n                    <span v-else-if=\"o.type==='datetime'\">\n\t\t\t\t\t\t\t                {{$toTime(o.field_value,\"yyyy-MM-dd hh:mm:ss\")}}\n                                        </span>\n                    <span v-else>{{o.field_value}}</span>\n                  </div>\n                  <div class=\"goods_detail_editor\" v-html=\"obj.content\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"col-12 col-md-2\">\n            <div class=\"card_aside\">\n              <h5>今日推荐</h5>\n              <list_goods_hot :list=\"list_hot\"></list_goods_hot>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport mixin from \"../../mixins/page.js\";\nimport list_goods_hot from \"../../components/diy/list_goods_hot.vue\";\nimport list_comment from \"../../components/diy/list_comment.vue\";\nimport div_goods from \"../../components/diy/div_goods.vue\";\nimport form_editor from \"../../components/diy/form_editor.vue\";\nexport default {\n  mixins: [mixin],\n  components: {\n    list_comment,\n    list_goods_hot,\n    div_goods,\n    form_editor,\n  },\n  data() {\n    return {\n      url_get_obj: \"~/api/goods/get_obj?\",\n      query: {\n        goods_id: 0,\n      },\n      list_comment: [],\n      list_hot: [],\n      selected_index: 2,\n      form_comment: {\n        source_table: \"goods\",\n        source_field: \"goods_id\",\n        source_id: 0,\n        reply_to_id: 0,\n        content:''\n      },\n      // 页面数\n      count_pages: 1,\n      // 是否设置过\n      seted_count_pages: true,\n      obj: {\n        goods_id: 0,\n        title: \"\",\n        img: \"\",\n        description: \"\",\n        price_ago: 0,\n        price: 0,\n        sales: 0,\n        inventory: 0,\n        type: \"\",\n        hits: 0,\n        content: '',\n        create_time: \"2021-02-20 20:48:07\",\n        update_time: \"2021-03-30 17:48:07\",\n        img_1: \"\",\n        img_2: \"\",\n        img_3: \"\",\n        img_4: \"\",\n        img_5: \"\",\n        source_table: \"\",\n        source_field: \"\",\n        source_id: 0,\n        num_buy: 1,\n        customize_field:\"\",\n        user_id:0\n      },\n      publish_flag:false\n    };\n  },\n  methods: {\n    /**\n     * 获取评论后\n     * @param {Object} json 响应对象\n     */\n    get_obj_after(json) {\n      var obj = json.result.obj;\n      this.get_comment(obj);\n      obj.num_buy = 1;\n      this.form_comment.source_id = obj.goods_id;\n      this.$get(\"~/api/order/get_obj?\", {\"goods_id\":obj.goods_id,\"user_id\":this.$store.state.user.user_id,\"state\":\"已付款\"}, (json) => {\n        if (json.result && json.result.obj) {\n          this.publish_flag = true\n        }\n      })\n    },\n    /**\n     * 获得热门商品\n     */\n    get_hot_goods() {\n      this.$get(\n        \"~/api/goods/get_list\",\n        {\n          page: 1,\n          size: 5,\n          orderby: \"hits\",\n        },\n        (res) => {\n          if (res.result) {\n            this.list_hot = res.result.list;\n          }\n        }\n      );\n    },\n    /**\n     * 更新评论\n     */\n    update_comment() {\n      this.get_comment(this.obj);\n    },\n\n    /**\n     * 获取评论\n     * @param { Object } obj 文章对象\n     * @param { Number } page 分页数\n     * @param { Number } size 评论显示条数\n     */\n    get_comment(obj, page = 1, size = 5) {\n      this.$get(\n        \"~/api/comment/get_list?\",\n        {\n          source_table: \"goods\",\n          source_field: \"goods_id\",\n          source_id: obj.goods_id,\n          page,\n          size,\n          orderby: \"create_time desc\",\n          reply_to_id: \"0\",\n        },\n        (json) => {\n          if (json.result) {\n            var list_comment = json.result.list;\n            list_comment.map(o=>{\n              o.list_reply = []\n            })\n            this.add_reply(list_comment).then((list) => {\n              this.list_comment = list;\n            });\n            // 分页器\n            if (this.seted_count_pages) {\n              this.seted_count_pages = false;\n              this.count_pages = Math.ceil(json.result.count / size);\n            }\n          }\n        }\n      );\n    },\n    /**\n     * @param { Array } list 评论列表\n     * 添加回复到评论列表\n     */\n    add_reply(list) {\n      return new Promise((resolve) => {\n        for (let idx = 0; idx < list.length; idx++) {\n          const obj = list[idx];\n          this.$get(\n            \"~/api/comment/get_list?\",\n            {\n              source_table: \"goods\",\n              source_field: \"goods_id\",\n              source_id: obj.goods_id,\n              orderby: \"create_time desc\",\n              reply_to_id: obj.comment_id,\n            },\n            (res) => {\n              if (res.result) {\n                obj.list_reply = res.result.list;\n              }\n            }\n          );\n        }\n        resolve(list);\n      });\n    },\n    /**\n     * 分页器\n     * @param { Number } page_num 分页数\n     * @return { Object } 查询对象\n     */\n    link_gen(page_num) {\n      return {\n        query: this.query,\n      };\n    },\n    /**\n     * 加载下一页\n     */\n    change_page(page_num) {\n      this.get_comment(this.obj, page_num);\n      this.form_comment.reply_to_id = 0;\n    },\n    // 获得商品轮播图\n    customize_field_list: function() {\n      if (this.obj.customize_field) {\n        let list_fields = JSON.parse(this.obj.customize_field)\n        return list_fields;\n      }\n      return []\n    }\n  },\n  computed: {\n    /**\n     * 获得图片列表\n     */\n    list_img() {\n      var { img_1, img_2, img_3, img_4 } = this.obj;\n      var list_img = [];\n      if (img_1) {\n        list_img.push(img_1);\n      }\n      if (img_2) {\n        list_img.push(img_2);\n      }\n      if (img_3) {\n        list_img.push(img_3);\n      }\n      if (img_4) {\n        list_img.push(img_4);\n      }\n      return list_img;\n    },\n    respondent() {\n      var reply_to_id = this.form_comment.reply_to_id;\n      var respondent = \"\";\n      this.list_comment.map((o) => {\n        if (o.comment_id === reply_to_id) {\n          respondent = o.nickname;\n        }\n      });\n      return respondent;\n    },\n  },\n  mounted() {\n    this.get_hot_goods();\n  },\n};\n</script>\n\n<style scoped>\n.card_bottom_goods {\n  margin-top: 60px;\n  padding: 5px;\n  border: 1px solid #eee;\n}\n.options {\n  font-size: 20px;\n  padding: 15px 0;\n  border-bottom: 1px solid #eee;\n}\n.options span {\n  cursor: pointer;\n  padding-right: 40px;\n  font-weight: 600;\n}\n.options span.selected {\n  color: var(--color_primary);\n}\n.options span:hover {\n  color: var(--color_primary);\n}\n.form_editor {\n  padding: 10px;\n}\n.comment_box {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n</style>\n"]}]}