{"remainingRequest":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\views\\user\\info.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\src\\views\\user\\info.vue","mtime":1657768166000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\weixinback\\wxid_5488mcc1cgih21\\WeChat Files\\wxid_5488mcc1cgih21\\FileStorage\\File\\2022-12\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgbWl4aW4gZnJvbSAiQC9taXhpbnMvcGFnZS5qcyI7CglpbXBvcnQgbGlzdF9tZW51X3VzZXIgZnJvbSAiQC9jb21wb25lbnRzL2RpeS9saXN0X21lbnVfdXNlci52dWUiOwoKCWV4cG9ydCBkZWZhdWx0IHsKCQltaXhpbnM6IFttaXhpbl0sCgkJZGF0YSgpIHsKCQkJcmV0dXJuIHsKCQkJCXVybF9nZXRfb2JqOiAifi9hcGkvdXNlci9nZXRfb2JqPyIsCgkJCQlxdWVyeTogewoJCQkJCXVzZXJfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9pZAoJCQkJfSwKCQkJCWRpc3BsYXlfaW5wdXQ6ICJub25lIiwKCQkJCWRpc3BsYXlfbmFtZTogImJsb2NrIiwKCQkJCWZvcm06IHt9LAoJCQkJLy8g6L6T5YWl6IGa54SmCgkJCQlmb2N1c19pbnB1dDogZmFsc2UsCgkJCQlsaXN0X2luZm86IFt7CgkJCQkJCXRpdGxlOiAi5Liq5Lq66LWE5paZIiwKCQkJCQkJdXJsOiAiL3VzZXIvaW5mbyIsCgkJCQkJCWljb246ICJob3VzZS1maWxsIiwKCQkJCQkJc2VsZWN0ZWQ6IHRydWUsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCXRpdGxlOiAi5a+G56CB5L+u5pS5IiwKCQkJCQkJdXJsOiAiL3VzZXIvcGFzc3dvcmQiLAoJCQkJCQlpY29uOiAicGVyc29uLWZpbGwiLAoJCQkJCQlzZWxlY3RlZDogZmFsc2UsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCXRpdGxlOiAi5pS26LSn5Zyw5Z2AIiwKCQkJCQkJdXJsOiAiL3VzZXIvYWRkcmVzcyIsCgkJCQkJCWljb246ICJtYXAtZmlsbCIsCgkJCQkJCXNlbGVjdGVkOiBmYWxzZSwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJdGl0bGU6ICLmlLbol48iLAoJCQkJCQl1cmw6ICIvdXNlci9jb2xsZWN0IiwKCQkJCQkJaWNvbjogImhlYXJ0LWZpbGwiLAoJCQkJCQlzZWxlY3RlZDogZmFsc2UsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCXRpdGxlOiAi6K6i5Y2VIiwKCQkJCQkJdXJsOiAiL29yZGVyL2xpc3QiLAoJCQkJCQlpY29uOiAiZmlsZS1lYXJtYXJrLW1pbnVzLWZpbGwiLAoJCQkJCQlzZWxlY3RlZDogZmFsc2UsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCXRpdGxlOiAi6LSt54mp6L2mIiwKCQkJCQkJdXJsOiAiL2NhcnQvbGlzdCIsCgkJCQkJCWljb246ICJjYXJ0LWZpbGwiLAoJCQkJCQlzZWxlY3RlZDogZmFsc2UsCgkJCQkJfSwKCQkJCV0sCgkJCQlmaWxlOiBudWxsLAoJCQl9OwoJCX0sCgkJbWV0aG9kczogewoJCQkvKioKCQkJICog5L+u5pS55aS05YOPCgkJCSAqIEBwYXJhbSB7IE9iamVjdCB9IGZpbGVzIOS4iuS8oOaWh+S7tuWvueixoQoJCQkgKi8KCQkJYXN5bmMgY2hhbmdlX2F2YXRhcihmaWxlcykgewoJCQkJdmFyIF90aGlzID0gdGhpczsKCQkJCXZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7CgkJCQlmb3JtLmFwcGVuZCgiZmlsZSIsIGZpbGVzWzBdKTsKCQkJCXZhciByZXMgPSBhd2FpdCB0aGlzLiRwb3N0KCJ+L2FwaS91c2VyL3VwbG9hZD8iLCBmb3JtKTsKCQkJCWNvbnNvbGUubG9nKHJlcykKCQkJCWlmIChyZXMucmVzdWx0KSB7CgkJCQkJdmFyIGF2YXRhciA9IHJlcy5yZXN1bHQudXJsOwoJCQkJCXRoaXMuJHBvc3QoCgkJCQkJCSJ+L2FwaS91c2VyL3NldD91c2VyX2lkPSIgKyBfdGhpcy51c2VyLnVzZXJfaWQsIHsKCQkJCQkJCWF2YXRhciwKCQkJCQkJfSwKCQkJCQkJKHJlcykgPT4gewoJCQkJCQkJdGhpcy51c2VyLmF2YXRhciA9IGF2YXRhcjsKCQkJCQkJCXRoaXMub2JqLmF2YXRhciA9IGF2YXRhcjsKCQkJCQkJfQoJCQkJCSk7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuJHRvYXN0KHJlcy5lcnJvci5tZXNzYWdlKTsKCQkJCX0KCQkJfSwKCQkJLyoqCgkJCSAqIOi3s+WHuuS/ruaUueaYteensOi+k+WFpeahhgoJCQkgKi8KCQkJY2hhbmdlX25pY2tuYW1lKCkgewoJCQkJdGhpcy5kaXNwbGF5X2lucHV0ID0gImZsZXgiOwoJCQkJdGhpcy5kaXNwbGF5X25hbWUgPSAibm9uZSI7CgkJCQl0aGlzLmZvY3VzX2lucHV0ID0gdHJ1ZTsKCQkJfSwKCQkJLyoqCgkJCSAqIOS/neWtmOaYteensOS/ruaUuQoJCQkgKi8KCQkJc2F2ZV9uaWNrbmFtZSgpIHsKCQkJCXZhciB1c2VyX2lkID0gdGhpcy51c2VyLnVzZXJfaWQ7CgkJCQl2YXIgbmlja25hbWUgPSB0aGlzLmZvcm0ubmlja25hbWU7CgkJCQl0aGlzLiRwb3N0KAoJCQkJCSJ+L2FwaS91c2VyL3NldD91c2VyX2lkPSIgKyB1c2VyX2lkLCB7CgkJCQkJCW5pY2tuYW1lLAoJCQkJCX0sCgkJCQkJKHJlcykgPT4gewoJCQkJCQljb25zb2xlLmxvZyhyZXMpOwoJCQkJCQl0aGlzLmZvY3VzX2lucHV0ID0gZmFsc2U7CgkJCQkJCXRoaXMuZGlzcGxheV9pbnB1dCA9ICJub25lIjsKCQkJCQkJdGhpcy5kaXNwbGF5X25hbWUgPSAiYmxvY2siOwoJCQkJCQl0aGlzLnVzZXIubmlja25hbWUgPSBuaWNrbmFtZTsKCQkJCQkJdGhpcy5vYmoubmlja25hbWUgPSBuaWNrbmFtZTsKCQkJCQl9CgkJCQkpOwoJCQl9LAoJCQlnZXRfb2JqX2JlZm9yZShwYXJhbXMpIHsKCQkJCXBhcmFtcy51c2VyX2lkID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyX2lkOwoJCQkJcmV0dXJuIHBhcmFtcwoJCQl9CgoJCX0sCgkJY29tcG9uZW50czogewoJCQlsaXN0X21lbnVfdXNlciwKCQl9LAoJfTsK"},{"version":3,"sources":["info.vue"],"names":[],"mappings":";AA0EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"info.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n\t<div class=\"page_user\" id=\"user_info\">\n\t\t<div class=\"warp\">\n\t\t\t<div class=\"container\">\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-12 col-md-3\">\n\t\t\t\t\t\t<div class=\"card_menu\">\n\t\t\t\t\t\t\t<!-- 左侧边栏 -->\n\t\t\t\t\t\t\t<list_menu_user :list_info=\"list_info\"></list_menu_user>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"col-12 col-md-9\">\n\t\t\t\t\t\t<div class=\"card_info pl-2\">\n\t\t\t\t\t\t\t<!-- 个人资料 -->\n\t\t\t\t\t\t\t<div class=\"div_info\">\n\t\t\t\t\t\t\t\t<span> 个人资料 </span>\n\t\t\t\t\t\t\t\t<div class=\"content_msg\">\n\t\t\t\t\t\t\t\t\t<div class=\"left_msg\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"figure_avatar\">\n\t\t\t\t\t\t\t\t\t\t\t<span>头像：</span>\n\t\t\t\t\t\t\t\t\t\t\t<b-img class=\"user_avator\"\n\t\t\t\t\t\t\t\t\t\t\t\t:src=\"obj.avatar ? $fullUrl(obj.avatar) : '/img/default.png'\" alt=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: 3rem; height: 3rem\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"nickname\">\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>昵称：</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div :style=\"'display:' + display_name + ';'\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"font-size: 1.2rem; color: var(--color_grey)\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ obj.nickname }}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"input_nickname\" :style=\"'display:' + display_input + ';'\">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" id=\"nickname\" v-model=\"form.nickname\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:focus=\"focus_input\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn_save\" @click=\"save_nickname()\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t保存\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"right_msg\">\n\t\t\t\t\t\t\t\t\t<div class=\"change_avatar_box\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"change_avatar\">\n\t\t\t\t\t\t\t\t\t\t\t<span>修改头像</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"right_wrap\">\n\t\t\t\t\t\t\t\t\t\t\t<b-icon icon=\"arrow-right-square\"></b-icon>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<input type=\"file\" @change=\"change_avatar($event.target.files)\" id=\"input_file\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\" \" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"change_nickname_box\" @click=\"change_nickname()\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"change_nickname\">\n\t\t\t\t\t\t\t\t\t\t\t<span>修改昵称</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"right_wrap\">\n\t\t\t\t\t\t\t\t\t\t\t<b-icon icon=\"arrow-right-square\"></b-icon>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport mixin from \"@/mixins/page.js\";\n\timport list_menu_user from \"@/components/diy/list_menu_user.vue\";\n\n\texport default {\n\t\tmixins: [mixin],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\turl_get_obj: \"~/api/user/get_obj?\",\n\t\t\t\tquery: {\n\t\t\t\t\tuser_id: this.$store.state.user.user_id\n\t\t\t\t},\n\t\t\t\tdisplay_input: \"none\",\n\t\t\t\tdisplay_name: \"block\",\n\t\t\t\tform: {},\n\t\t\t\t// 输入聚焦\n\t\t\t\tfocus_input: false,\n\t\t\t\tlist_info: [{\n\t\t\t\t\t\ttitle: \"个人资料\",\n\t\t\t\t\t\turl: \"/user/info\",\n\t\t\t\t\t\ticon: \"house-fill\",\n\t\t\t\t\t\tselected: true,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"密码修改\",\n\t\t\t\t\t\turl: \"/user/password\",\n\t\t\t\t\t\ticon: \"person-fill\",\n\t\t\t\t\t\tselected: false,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"收货地址\",\n\t\t\t\t\t\turl: \"/user/address\",\n\t\t\t\t\t\ticon: \"map-fill\",\n\t\t\t\t\t\tselected: false,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"收藏\",\n\t\t\t\t\t\turl: \"/user/collect\",\n\t\t\t\t\t\ticon: \"heart-fill\",\n\t\t\t\t\t\tselected: false,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"订单\",\n\t\t\t\t\t\turl: \"/order/list\",\n\t\t\t\t\t\ticon: \"file-earmark-minus-fill\",\n\t\t\t\t\t\tselected: false,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"购物车\",\n\t\t\t\t\t\turl: \"/cart/list\",\n\t\t\t\t\t\ticon: \"cart-fill\",\n\t\t\t\t\t\tselected: false,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tfile: null,\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * 修改头像\n\t\t\t * @param { Object } files 上传文件对象\n\t\t\t */\n\t\t\tasync change_avatar(files) {\n\t\t\t\tvar _this = this;\n\t\t\t\tvar form = new FormData();\n\t\t\t\tform.append(\"file\", files[0]);\n\t\t\t\tvar res = await this.$post(\"~/api/user/upload?\", form);\n\t\t\t\tconsole.log(res)\n\t\t\t\tif (res.result) {\n\t\t\t\t\tvar avatar = res.result.url;\n\t\t\t\t\tthis.$post(\n\t\t\t\t\t\t\"~/api/user/set?user_id=\" + _this.user.user_id, {\n\t\t\t\t\t\t\tavatar,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(res) => {\n\t\t\t\t\t\t\tthis.user.avatar = avatar;\n\t\t\t\t\t\t\tthis.obj.avatar = avatar;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.$toast(res.error.message);\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * 跳出修改昵称输入框\n\t\t\t */\n\t\t\tchange_nickname() {\n\t\t\t\tthis.display_input = \"flex\";\n\t\t\t\tthis.display_name = \"none\";\n\t\t\t\tthis.focus_input = true;\n\t\t\t},\n\t\t\t/**\n\t\t\t * 保存昵称修改\n\t\t\t */\n\t\t\tsave_nickname() {\n\t\t\t\tvar user_id = this.user.user_id;\n\t\t\t\tvar nickname = this.form.nickname;\n\t\t\t\tthis.$post(\n\t\t\t\t\t\"~/api/user/set?user_id=\" + user_id, {\n\t\t\t\t\t\tnickname,\n\t\t\t\t\t},\n\t\t\t\t\t(res) => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\tthis.focus_input = false;\n\t\t\t\t\t\tthis.display_input = \"none\";\n\t\t\t\t\t\tthis.display_name = \"block\";\n\t\t\t\t\t\tthis.user.nickname = nickname;\n\t\t\t\t\t\tthis.obj.nickname = nickname;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\tget_obj_before(params) {\n\t\t\t\tparams.user_id = this.$store.state.user.user_id;\n\t\t\t\treturn params\n\t\t\t}\n\n\t\t},\n\t\tcomponents: {\n\t\t\tlist_menu_user,\n\t\t},\n\t};\n</script>\n\n<style scoped>\n\t.container {\n\t\tmin-height: 800px;\n\t}\n\n\t.content_msg {\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 30px;\n\t\t/* border-bottom: 1px solid var(--color_default_h);\n        margin-right: 5px; */\n\t}\n\n\t.figure_avatar {\n\t\tpadding: 5px;\n\t\theight: 60px;\n\t\tline-height: 60px;\n\t}\n\n\t.nickname {\n\t\tdisplay: flex;\n\t\tpadding: 5px;\n\t\tline-height: 30px;\n\t}\n\n\t.input_nickname .btn_save {\n\t\twidth: 4rem;\n\t\ttext-align: center;\n\t\theight: 31px;\n\t\tline-height: 31px;\n\t\tborder: 1px solid var(--color_grey);\n\t\tborder-radius: 5px;\n\t\tmargin-right: 4px;\n\t}\n\n\t.btn_save:hover {\n\t\tbackground-color: var(--color_success);\n\t\tborder: none;\n\t\tcolor: white;\n\t}\n\n\t.right_msg {\n\t\tmargin: auto;\n\t}\n\n\t.right_msg .change_avatar_box {\n\t\tcursor: pointer;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tmargin-left: 5px;\n\t}\n\n\t.right_wrap {\n\t\tmargin: 0 10px;\n\t}\n\n\t.right_msg .change_avatar_box #input_file {\n\t\tcursor: pointer;\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\topacity: 0;\n\t\tz-index: 1000;\n\t\tfont-size: 0;\n\t}\n\n\t.change_nickname_box {\n\t\tmargin-top: 10px;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tmargin-left: 5px;\n\t}\n</style>\n"]}]}